{"version":3,"file":"options-B_CqNpAu.js","sources":["../../src/options/components/GeneralSettings.tsx","../../src/options/components/CloudProviders.tsx","../../src/options/components/LocalModels.tsx","../../src/options/components/GlossarySettings.tsx","../../src/options/components/SiteRulesSettings.tsx","../../src/options/components/CacheSettings.tsx","../../src/options/Options.tsx","../../src/options/index.tsx"],"sourcesContent":["/**\n * General Settings Section\n * Default languages, translation strategy\n */\n\nimport { Component, createSignal, onMount, For } from 'solid-js';\nimport { safeStorageGet, safeStorageSet } from '../../core/storage';\nimport type { Strategy } from '../../types';\n\nconst LANGUAGES = [\n  { code: 'auto', name: 'Auto Detect' },\n  { code: 'en', name: 'English' },\n  { code: 'fi', name: 'Finnish' },\n  { code: 'de', name: 'German' },\n  { code: 'fr', name: 'French' },\n  { code: 'es', name: 'Spanish' },\n  { code: 'sv', name: 'Swedish' },\n  { code: 'ru', name: 'Russian' },\n  { code: 'zh', name: 'Chinese' },\n  { code: 'ja', name: 'Japanese' },\n  { code: 'nl', name: 'Dutch' },\n  { code: 'cs', name: 'Czech' },\n  { code: 'pt', name: 'Portuguese' },\n  { code: 'it', name: 'Italian' },\n  { code: 'pl', name: 'Polish' },\n  { code: 'ko', name: 'Korean' },\n];\n\nconst STRATEGIES: Array<{ id: Strategy; name: string; description: string }> = [\n  { id: 'smart', name: 'Smart', description: 'Auto-select best provider based on content' },\n  { id: 'fast', name: 'Fast', description: 'Prioritize speed over quality' },\n  { id: 'quality', name: 'Quality', description: 'Prioritize accuracy over speed' },\n  { id: 'cost', name: 'Cost', description: 'Prioritize free/local providers' },\n  { id: 'balanced', name: 'Balanced', description: 'Balance between speed, quality, and cost' },\n];\n\ninterface StoredSettings {\n  sourceLang?: string;\n  targetLang?: string;\n  strategy?: Strategy;\n  autoTranslate?: boolean;\n}\n\nexport const GeneralSettings: Component = () => {\n  const [sourceLang, setSourceLang] = createSignal('auto');\n  const [targetLang, setTargetLang] = createSignal('en');\n  const [strategy, setStrategy] = createSignal<Strategy>('smart');\n  const [autoTranslate, setAutoTranslate] = createSignal(false);\n  const [saved, setSaved] = createSignal(false);\n  const [saving, setSaving] = createSignal(false);\n\n  onMount(async () => {\n    const stored = await safeStorageGet<StoredSettings>([\n      'sourceLang',\n      'targetLang',\n      'strategy',\n      'autoTranslate',\n    ]);\n\n    if (stored.sourceLang) setSourceLang(stored.sourceLang);\n    if (stored.targetLang) setTargetLang(stored.targetLang);\n    if (stored.strategy) setStrategy(stored.strategy);\n    if (stored.autoTranslate !== undefined) setAutoTranslate(stored.autoTranslate);\n  });\n\n  const saveSettings = async () => {\n    setSaving(true);\n    const success = await safeStorageSet({\n      sourceLang: sourceLang(),\n      targetLang: targetLang(),\n      strategy: strategy(),\n      autoTranslate: autoTranslate(),\n    });\n\n    setSaving(false);\n    if (success) {\n      setSaved(true);\n      setTimeout(() => setSaved(false), 2000);\n    }\n  };\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"1.5rem\" }}>General Settings</h2>\n\n      {/* Language Defaults */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <div>\n            <h3 class=\"section-title\">Default Languages</h3>\n            <p class=\"section-subtitle\">Set your preferred source and target languages</p>\n          </div>\n        </div>\n\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label class=\"form-label\">Source Language</label>\n            <select\n              class=\"form-select\"\n              value={sourceLang()}\n              onChange={(e) => setSourceLang(e.currentTarget.value)}\n            >\n              <For each={LANGUAGES}>\n                {(lang) => <option value={lang.code}>{lang.name}</option>}\n              </For>\n            </select>\n            <p class=\"form-hint\">Auto Detect works best in most cases</p>\n          </div>\n\n          <div class=\"form-group\">\n            <label class=\"form-label\">Target Language</label>\n            <select\n              class=\"form-select\"\n              value={targetLang()}\n              onChange={(e) => setTargetLang(e.currentTarget.value)}\n            >\n              <For each={LANGUAGES.filter(l => l.code !== 'auto')}>\n                {(lang) => <option value={lang.code}>{lang.name}</option>}\n              </For>\n            </select>\n            <p class=\"form-hint\">The language you want text translated into</p>\n          </div>\n        </div>\n      </section>\n\n      {/* Translation Strategy */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <div>\n            <h3 class=\"section-title\">Translation Strategy</h3>\n            <p class=\"section-subtitle\">How translations should be processed</p>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Default Strategy</label>\n          <select\n            class=\"form-select\"\n            value={strategy()}\n            onChange={(e) => setStrategy(e.currentTarget.value as Strategy)}\n          >\n            <For each={STRATEGIES}>\n              {(s) => <option value={s.id}>{s.name} - {s.description}</option>}\n            </For>\n          </select>\n        </div>\n      </section>\n\n      {/* Auto-Translate */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <div>\n            <h3 class=\"section-title\">Automatic Translation</h3>\n            <p class=\"section-subtitle\">Configure automatic page translation</p>\n          </div>\n        </div>\n\n        <div class=\"toggle-container\">\n          <div class=\"toggle-info\">\n            <span class=\"toggle-label\">Auto-translate pages</span>\n            <p class=\"toggle-description\">\n              Automatically translate pages when the source language differs from your target language\n            </p>\n          </div>\n          <label class=\"toggle-switch\">\n            <input\n              type=\"checkbox\"\n              checked={autoTranslate()}\n              onChange={(e) => setAutoTranslate(e.currentTarget.checked)}\n            />\n            <span class=\"toggle-slider\" />\n          </label>\n        </div>\n      </section>\n\n      {/* Save Button */}\n      <div class=\"btn-group\" style={{ \"margin-top\": \"1.5rem\" }}>\n        <button class=\"btn btn-primary btn-lg\" onClick={saveSettings} disabled={saving()}>\n          {saving() ? (\n            <>\n              <span class=\"spinner\" />\n              Saving...\n            </>\n          ) : saved() ? (\n            'Saved!'\n          ) : (\n            'Save Settings'\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default GeneralSettings;\n","/**\n * Cloud Providers Section\n * API key management for DeepL, OpenAI, Google Cloud, Anthropic\n */\n\nimport { Component, createSignal, onMount, For, Show } from 'solid-js';\nimport type { TranslationProviderId } from '../../types';\n\n// Cloud provider definitions\nconst CLOUD_PROVIDERS = [\n  {\n    id: 'deepl' as TranslationProviderId,\n    name: 'DeepL',\n    keyField: 'deepl_api_key',\n    enabledField: 'deepl_enabled',\n    hasProTier: true,\n    proField: 'deepl_is_pro',\n    placeholder: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx:fx',\n    helpUrl: 'https://www.deepl.com/pro-api',\n    description: 'Premium translation quality. Free tier: 500K chars/month.',\n    testEndpoint: 'https://api-free.deepl.com/v2/usage',\n  },\n  {\n    id: 'openai' as TranslationProviderId,\n    name: 'OpenAI',\n    keyField: 'openai_api_key',\n    enabledField: 'openai_enabled',\n    modelField: 'openai_model',\n    hasProTier: false,\n    placeholder: 'sk-...',\n    helpUrl: 'https://platform.openai.com/api-keys',\n    description: 'GPT-4 powered translations with context understanding.',\n    models: ['gpt-4o', 'gpt-4o-mini', 'gpt-4-turbo', 'gpt-3.5-turbo'],\n  },\n  {\n    id: 'google-cloud' as TranslationProviderId,\n    name: 'Google Cloud',\n    keyField: 'google_cloud_api_key',\n    enabledField: 'google_cloud_enabled',\n    hasProTier: false,\n    placeholder: 'AIza...',\n    helpUrl: 'https://cloud.google.com/translate/docs/setup',\n    description: 'Google Cloud Translation API v2.',\n  },\n  {\n    id: 'anthropic' as TranslationProviderId,\n    name: 'Claude (Anthropic)',\n    keyField: 'anthropic_api_key',\n    enabledField: 'anthropic_enabled',\n    modelField: 'anthropic_model',\n    hasProTier: false,\n    placeholder: 'sk-ant-...',\n    helpUrl: 'https://console.anthropic.com/settings/keys',\n    description: 'Claude-powered translations with nuanced understanding.',\n    models: ['claude-sonnet-4-20250514', 'claude-3-5-haiku-latest'],\n  },\n];\n\ninterface ProviderStatus {\n  hasKey: boolean;\n  enabled: boolean;\n  isPro?: boolean;\n  model?: string;\n  testing?: boolean;\n  testResult?: 'success' | 'error' | null;\n  testMessage?: string;\n}\n\nexport const CloudProviders: Component = () => {\n  const [providerStatus, setProviderStatus] = createSignal<Record<string, ProviderStatus>>({});\n  const [editingProvider, setEditingProvider] = createSignal<string | null>(null);\n  const [apiKeyInput, setApiKeyInput] = createSignal('');\n  const [isProTier, setIsProTier] = createSignal(false);\n  const [selectedModel, setSelectedModel] = createSignal('');\n  const [saving, setSaving] = createSignal(false);\n  const [error, setError] = createSignal<string | null>(null);\n\n  onMount(async () => {\n    await loadProviderStatus();\n  });\n\n  const loadProviderStatus = async () => {\n    const status: Record<string, ProviderStatus> = {};\n\n    try {\n      const keys = CLOUD_PROVIDERS.flatMap((p) => {\n        const fields = [p.keyField, p.enabledField];\n        if (p.hasProTier && p.proField) fields.push(p.proField);\n        if (p.modelField) fields.push(p.modelField);\n        return fields;\n      });\n\n      const stored = await chrome.storage.local.get(keys);\n\n      for (const provider of CLOUD_PROVIDERS) {\n        status[provider.id] = {\n          hasKey: !!stored[provider.keyField],\n          enabled: stored[provider.enabledField] ?? false,\n          isPro: provider.hasProTier && provider.proField ? stored[provider.proField] : undefined,\n          model: provider.modelField ? stored[provider.modelField] : undefined,\n        };\n      }\n    } catch (e) {\n      console.error('[CloudProviders] Failed to load status:', e);\n    }\n\n    setProviderStatus(status);\n  };\n\n  const startEditing = (providerId: string) => {\n    const provider = CLOUD_PROVIDERS.find((p) => p.id === providerId);\n    const status = providerStatus()[providerId];\n\n    setEditingProvider(providerId);\n    setApiKeyInput('');\n    setIsProTier(status?.isPro ?? false);\n    setSelectedModel(status?.model || provider?.models?.[0] || '');\n    setError(null);\n  };\n\n  const cancelEditing = () => {\n    setEditingProvider(null);\n    setApiKeyInput('');\n    setError(null);\n  };\n\n  const saveApiKey = async (providerId: string) => {\n    const provider = CLOUD_PROVIDERS.find((p) => p.id === providerId);\n    if (!provider) return;\n\n    const key = apiKeyInput().trim();\n    if (!key) {\n      setError('Please enter an API key');\n      return;\n    }\n\n    setSaving(true);\n    setError(null);\n\n    try {\n      const data: Record<string, unknown> = {\n        [provider.keyField]: key,\n        [provider.enabledField]: true,\n      };\n\n      if (provider.hasProTier && provider.proField) {\n        data[provider.proField] = isProTier();\n      }\n\n      if (provider.modelField) {\n        data[provider.modelField] = selectedModel();\n      }\n\n      await chrome.storage.local.set(data);\n\n      setProviderStatus((prev) => ({\n        ...prev,\n        [providerId]: {\n          hasKey: true,\n          enabled: true,\n          isPro: isProTier(),\n          model: selectedModel(),\n        },\n      }));\n\n      setEditingProvider(null);\n    } catch (e) {\n      console.error('[CloudProviders] Failed to save key:', e);\n      setError('Failed to save API key');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const removeApiKey = async (providerId: string) => {\n    const provider = CLOUD_PROVIDERS.find((p) => p.id === providerId);\n    if (!provider) return;\n\n    if (!confirm(`Remove ${provider.name} API key?`)) return;\n\n    try {\n      const keysToRemove = [provider.keyField, provider.enabledField];\n      if (provider.hasProTier && provider.proField) {\n        keysToRemove.push(provider.proField);\n      }\n      if (provider.modelField) {\n        keysToRemove.push(provider.modelField);\n      }\n\n      await chrome.storage.local.remove(keysToRemove);\n\n      setProviderStatus((prev) => ({\n        ...prev,\n        [providerId]: { hasKey: false, enabled: false },\n      }));\n    } catch (e) {\n      console.error('[CloudProviders] Failed to remove key:', e);\n    }\n  };\n\n  const toggleProvider = async (providerId: string) => {\n    const provider = CLOUD_PROVIDERS.find((p) => p.id === providerId);\n    const status = providerStatus()[providerId];\n    if (!provider || !status?.hasKey) return;\n\n    const newEnabled = !status.enabled;\n\n    try {\n      await chrome.storage.local.set({ [provider.enabledField]: newEnabled });\n\n      setProviderStatus((prev) => ({\n        ...prev,\n        [providerId]: { ...prev[providerId], enabled: newEnabled },\n      }));\n    } catch (e) {\n      console.error('[CloudProviders] Failed to toggle provider:', e);\n    }\n  };\n\n  const testProvider = async (providerId: string) => {\n    const provider = CLOUD_PROVIDERS.find((p) => p.id === providerId);\n    if (!provider) return;\n\n    setProviderStatus((prev) => ({\n      ...prev,\n      [providerId]: { ...prev[providerId], testing: true, testResult: null },\n    }));\n\n    try {\n      // Send test message to background script\n      const response = await chrome.runtime.sendMessage({\n        type: 'testProvider',\n        provider: providerId,\n      });\n\n      setProviderStatus((prev) => ({\n        ...prev,\n        [providerId]: {\n          ...prev[providerId],\n          testing: false,\n          testResult: response?.success ? 'success' : 'error',\n          testMessage: response?.message || (response?.success ? 'Connection successful' : 'Test failed'),\n        },\n      }));\n\n      // Clear result after 3 seconds\n      setTimeout(() => {\n        setProviderStatus((prev) => ({\n          ...prev,\n          [providerId]: { ...prev[providerId], testResult: null, testMessage: undefined },\n        }));\n      }, 3000);\n    } catch (e) {\n      console.error('[CloudProviders] Test failed:', e);\n      setProviderStatus((prev) => ({\n        ...prev,\n        [providerId]: {\n          ...prev[providerId],\n          testing: false,\n          testResult: 'error',\n          testMessage: 'Test failed: ' + (e instanceof Error ? e.message : 'Unknown error'),\n        },\n      }));\n    }\n  };\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"0.5rem\" }}>Cloud Translation Providers</h2>\n      <p class=\"section-description\">\n        Configure API keys for cloud-based translation services. Each provider offers different\n        strengths - DeepL excels at European languages, while GPT models handle context better.\n      </p>\n\n      <For each={CLOUD_PROVIDERS}>\n        {(provider) => {\n          const status = () => providerStatus()[provider.id] || { hasKey: false, enabled: false };\n          const isEditing = () => editingProvider() === provider.id;\n\n          return (\n            <div class={`provider-card ${status().enabled ? 'enabled' : ''}`}>\n              <div class=\"provider-header\">\n                <div class=\"provider-info\">\n                  <span class=\"provider-name\">{provider.name}</span>\n                  <Show when={status().hasKey}>\n                    <span class={`badge ${status().enabled ? 'badge-success' : 'badge-neutral'}`}>\n                      {status().enabled ? 'Enabled' : 'Disabled'}\n                    </span>\n                    <Show when={status().isPro}>\n                      <span class=\"badge badge-info\">Pro</span>\n                    </Show>\n                  </Show>\n                  <Show when={!status().hasKey}>\n                    <span class=\"badge badge-neutral\">Not configured</span>\n                  </Show>\n                </div>\n\n                <div class=\"btn-group\">\n                  <Show when={status().hasKey && !isEditing()}>\n                    <button\n                      class={`btn btn-sm ${status().enabled ? 'btn-secondary' : 'btn-primary'}`}\n                      onClick={() => toggleProvider(provider.id)}\n                    >\n                      {status().enabled ? 'Disable' : 'Enable'}\n                    </button>\n                    <button\n                      class=\"btn btn-sm btn-secondary\"\n                      onClick={() => testProvider(provider.id)}\n                      disabled={status().testing}\n                    >\n                      {status().testing ? (\n                        <span class=\"spinner\" />\n                      ) : (\n                        'Test'\n                      )}\n                    </button>\n                  </Show>\n                </div>\n              </div>\n\n              <p class=\"provider-description\">{provider.description}</p>\n\n              {/* Test Result */}\n              <Show when={status().testResult}>\n                <div class={`alert ${status().testResult === 'success' ? 'alert-success' : 'alert-error'}`}>\n                  {status().testMessage}\n                </div>\n              </Show>\n\n              {/* Edit Form */}\n              <Show when={isEditing()}>\n                <div class=\"provider-form\">\n                  <Show when={error()}>\n                    <div class=\"alert alert-error\">{error()}</div>\n                  </Show>\n\n                  <div class=\"form-group\">\n                    <label class=\"form-label\">API Key</label>\n                    <input\n                      type=\"password\"\n                      class=\"form-input\"\n                      placeholder={provider.placeholder}\n                      value={apiKeyInput()}\n                      onInput={(e) => setApiKeyInput(e.currentTarget.value)}\n                      autocomplete=\"off\"\n                    />\n                  </div>\n\n                  <Show when={provider.hasProTier}>\n                    <div class=\"toggle-container\" style={{ padding: \"0.5rem 0\" }}>\n                      <div class=\"toggle-info\">\n                        <span class=\"toggle-label\">Pro tier (paid account)</span>\n                        <p class=\"toggle-description\">Uses the paid API endpoint for higher limits</p>\n                      </div>\n                      <label class=\"toggle-switch\">\n                        <input\n                          type=\"checkbox\"\n                          checked={isProTier()}\n                          onChange={(e) => setIsProTier(e.currentTarget.checked)}\n                        />\n                        <span class=\"toggle-slider\" />\n                      </label>\n                    </div>\n                  </Show>\n\n                  <Show when={provider.models && provider.models.length > 0}>\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Model</label>\n                      <select\n                        class=\"form-select\"\n                        value={selectedModel()}\n                        onChange={(e) => setSelectedModel(e.currentTarget.value)}\n                      >\n                        <For each={provider.models}>\n                          {(model) => <option value={model}>{model}</option>}\n                        </For>\n                      </select>\n                    </div>\n                  </Show>\n\n                  <div class=\"provider-actions\">\n                    <button\n                      class=\"btn btn-primary\"\n                      onClick={() => saveApiKey(provider.id)}\n                      disabled={saving()}\n                    >\n                      {saving() ? 'Saving...' : 'Save'}\n                    </button>\n                    <button class=\"btn btn-secondary\" onClick={cancelEditing}>\n                      Cancel\n                    </button>\n                    <a\n                      href={provider.helpUrl}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      class=\"btn btn-ghost\"\n                    >\n                      Get API key\n                    </a>\n                  </div>\n                </div>\n              </Show>\n\n              {/* Action Buttons (when not editing) */}\n              <Show when={!isEditing()}>\n                <div class=\"provider-actions\">\n                  <button class=\"btn btn-secondary\" onClick={() => startEditing(provider.id)}>\n                    {status().hasKey ? 'Update API Key' : 'Add API Key'}\n                  </button>\n                  <Show when={status().hasKey}>\n                    <button class=\"btn btn-danger\" onClick={() => removeApiKey(provider.id)}>\n                      Remove\n                    </button>\n                  </Show>\n                </div>\n              </Show>\n            </div>\n          );\n        }}\n      </For>\n    </div>\n  );\n};\n\nexport default CloudProviders;\n","/**\n * Local Models Section\n * Downloaded models list, storage usage, clear all\n */\n\nimport { Component, createSignal, onMount, For, Show } from 'solid-js';\n\ninterface ModelInfo {\n  id: string;\n  name: string;\n  size: number;\n  lastUsed?: number;\n}\n\ninterface StorageStats {\n  totalUsed: number;\n  quota: number;\n  models: ModelInfo[];\n}\n\n// Format bytes to human-readable\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\n// Format date\nfunction formatDate(timestamp: number): string {\n  return new Date(timestamp).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nexport const LocalModels: Component = () => {\n  const [loading, setLoading] = createSignal(true);\n  const [stats, setStats] = createSignal<StorageStats>({\n    totalUsed: 0,\n    quota: 0,\n    models: [],\n  });\n  const [deleting, setDeleting] = createSignal<string | null>(null);\n\n  onMount(async () => {\n    await loadModelStats();\n  });\n\n  const loadModelStats = async () => {\n    setLoading(true);\n\n    try {\n      // Get storage estimate\n      let estimate = { usage: 0, quota: 0 };\n      if ('storage' in navigator && 'estimate' in navigator.storage) {\n        estimate = await navigator.storage.estimate() as { usage: number; quota: number };\n      }\n\n      // Get cached model info from storage\n      const stored = await chrome.storage.local.get(['downloadedModels']);\n      const models: ModelInfo[] = stored.downloadedModels || [];\n\n      // Try to get model list from background\n      try {\n        const response = await chrome.runtime.sendMessage({ type: 'getDownloadedModels' });\n        if (response?.models) {\n          setStats({\n            totalUsed: estimate.usage || 0,\n            quota: estimate.quota || 0,\n            models: response.models,\n          });\n          setLoading(false);\n          return;\n        }\n      } catch {\n        // Background script might not support this message\n      }\n\n      // Fallback: estimate from known model sizes\n      const knownModels: ModelInfo[] = [\n        { id: 'opus-mt-en-fi', name: 'OPUS-MT English-Finnish', size: 300 * 1024 * 1024 },\n        { id: 'opus-mt-fi-en', name: 'OPUS-MT Finnish-English', size: 300 * 1024 * 1024 },\n        { id: 'opus-mt-en-de', name: 'OPUS-MT English-German', size: 300 * 1024 * 1024 },\n        { id: 'opus-mt-de-en', name: 'OPUS-MT German-English', size: 300 * 1024 * 1024 },\n        { id: 'translategemma', name: 'TranslateGemma 4B', size: 2.5 * 1024 * 1024 * 1024 },\n      ];\n\n      // Merge with stored models if available\n      const mergedModels = models.length > 0 ? models : knownModels.filter(\n        () => estimate.usage && estimate.usage > 100 * 1024 * 1024\n      );\n\n      setStats({\n        totalUsed: estimate.usage || 0,\n        quota: estimate.quota || 0,\n        models: mergedModels,\n      });\n    } catch (e) {\n      console.error('[LocalModels] Failed to load stats:', e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteModel = async (modelId: string) => {\n    if (!confirm(`Delete model \"${modelId}\"? You will need to re-download it to use it again.`)) {\n      return;\n    }\n\n    setDeleting(modelId);\n\n    try {\n      // Try to delete via background script\n      await chrome.runtime.sendMessage({\n        type: 'deleteModel',\n        modelId,\n      });\n\n      // Remove from local list\n      setStats((prev) => ({\n        ...prev,\n        models: prev.models.filter((m) => m.id !== modelId),\n      }));\n\n      // Refresh stats\n      await loadModelStats();\n    } catch (e) {\n      console.error('[LocalModels] Failed to delete model:', e);\n      alert('Failed to delete model. It may be in use.');\n    } finally {\n      setDeleting(null);\n    }\n  };\n\n  const clearAllModels = async () => {\n    if (!confirm('Delete ALL downloaded models? This will free up storage but you will need to re-download models when needed.')) {\n      return;\n    }\n\n    try {\n      // Try to clear via background script\n      await chrome.runtime.sendMessage({ type: 'clearAllModels' });\n\n      // Clear Cache API if available\n      if ('caches' in window) {\n        const keys = await caches.keys();\n        for (const key of keys) {\n          if (key.includes('transformers') || key.includes('model')) {\n            await caches.delete(key);\n          }\n        }\n      }\n\n      // Refresh stats\n      await loadModelStats();\n    } catch (e) {\n      console.error('[LocalModels] Failed to clear models:', e);\n      alert('Failed to clear models. Some models may still be cached.');\n    }\n  };\n\n  const usagePercent = () => {\n    const s = stats();\n    if (s.quota === 0) return 0;\n    return Math.min(100, (s.totalUsed / s.quota) * 100);\n  };\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"0.5rem\" }}>Local Models</h2>\n      <p class=\"section-description\">\n        Manage downloaded translation models. Local models run entirely on your device\n        without sending data to any server.\n      </p>\n\n      <Show when={loading()}>\n        <div class=\"settings-section\">\n          <div class=\"loading\" style={{ height: \"100px\" }}>\n            <span class=\"spinner\" />\n          </div>\n        </div>\n      </Show>\n\n      <Show when={!loading()}>\n        {/* Storage Usage */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <div>\n              <h3 class=\"section-title\">Storage Usage</h3>\n              <p class=\"section-subtitle\">Local storage used by downloaded models</p>\n            </div>\n          </div>\n\n          <div style={{ \"margin-bottom\": \"1rem\" }}>\n            <div style={{ display: \"flex\", \"justify-content\": \"space-between\", \"margin-bottom\": \"0.5rem\" }}>\n              <span style={{ \"font-weight\": \"500\" }}>{formatBytes(stats().totalUsed)}</span>\n              <span style={{ color: \"var(--color-gray-500)\" }}>\n                of {formatBytes(stats().quota)} available\n              </span>\n            </div>\n            <div class=\"progress-bar\">\n              <div\n                class={`progress-fill ${usagePercent() > 80 ? 'danger' : usagePercent() > 50 ? 'warning' : ''}`}\n                style={{ width: `${usagePercent()}%` }}\n              />\n            </div>\n          </div>\n\n          <button class=\"btn btn-danger\" onClick={clearAllModels}>\n            Clear All Models\n          </button>\n        </section>\n\n        {/* Downloaded Models */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <h3 class=\"section-title\">Downloaded Models</h3>\n          </div>\n\n          <Show\n            when={stats().models.length > 0}\n            fallback={\n              <div class=\"empty-state\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                  <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\" />\n                  <path d=\"M9 9h6M9 13h6M9 17h4\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" />\n                </svg>\n                <p>No models downloaded yet</p>\n                <p style={{ \"font-size\": \"0.875rem\" }}>\n                  Models will be downloaded automatically when you first use a language pair.\n                </p>\n              </div>\n            }\n          >\n            <For each={stats().models}>\n              {(model) => (\n                <div class=\"model-card\">\n                  <div class=\"model-info\">\n                    <div class=\"model-name\">{model.name || model.id}</div>\n                    <div class=\"model-size\">\n                      {formatBytes(model.size)}\n                      <Show when={model.lastUsed}>\n                        {' | Last used: '}\n                        {formatDate(model.lastUsed!)}\n                      </Show>\n                    </div>\n                  </div>\n                  <div class=\"model-actions\">\n                    <button\n                      class=\"btn btn-sm btn-danger\"\n                      onClick={() => deleteModel(model.id)}\n                      disabled={deleting() === model.id}\n                    >\n                      {deleting() === model.id ? <span class=\"spinner\" /> : 'Delete'}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </For>\n          </Show>\n        </section>\n\n        {/* Info */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <h3 class=\"section-title\">About Local Models</h3>\n          </div>\n          <div style={{ \"font-size\": \"0.875rem\", color: \"var(--color-gray-600)\" }}>\n            <p style={{ \"margin-bottom\": \"0.75rem\" }}>\n              <strong>OPUS-MT Models</strong> (~300MB each): Helsinki-NLP translation models.\n              Fast and accurate for European languages.\n            </p>\n            <p style={{ \"margin-bottom\": \"0.75rem\" }}>\n              <strong>TranslateGemma</strong> (~2.5GB): Google's multilingual model.\n              Supports 8 languages with high quality but requires WebGPU.\n            </p>\n            <p>\n              Models are stored in IndexedDB and persist across browser restarts.\n              They are downloaded on first use for each language pair.\n            </p>\n          </div>\n        </section>\n      </Show>\n    </div>\n  );\n};\n\nexport default LocalModels;\n","/**\n * Glossary Settings Section\n * Add term mappings, import/export, per-language glossaries\n */\n\nimport { Component, createSignal, onMount, For, Show } from 'solid-js';\nimport { glossary, type GlossaryStore, type GlossaryTerm } from '../../core/glossary';\n\nconst LANGUAGES = [\n  { code: 'all', name: 'All Languages' },\n  { code: 'en', name: 'English' },\n  { code: 'fi', name: 'Finnish' },\n  { code: 'de', name: 'German' },\n  { code: 'fr', name: 'French' },\n  { code: 'es', name: 'Spanish' },\n  { code: 'sv', name: 'Swedish' },\n];\n\nexport const GlossarySettings: Component = () => {\n  const [terms, setTerms] = createSignal<GlossaryStore>({});\n  const [selectedLanguage, setSelectedLanguage] = createSignal('all');\n  const [searchQuery, setSearchQuery] = createSignal('');\n  const [showAddForm, setShowAddForm] = createSignal(false);\n  const [error, setError] = createSignal<string | null>(null);\n  const [success, setSuccess] = createSignal<string | null>(null);\n\n  // Form state\n  const [newSource, setNewSource] = createSignal('');\n  const [newTarget, setNewTarget] = createSignal('');\n  const [newCaseSensitive, setNewCaseSensitive] = createSignal(false);\n  const [newDescription, setNewDescription] = createSignal('');\n  const [newLanguage, setNewLanguage] = createSignal('all');\n\n  // Edit state\n  const [editingTerm, setEditingTerm] = createSignal<string | null>(null);\n  const [editTarget, setEditTarget] = createSignal('');\n  const [editCaseSensitive, setEditCaseSensitive] = createSignal(false);\n  const [editDescription, setEditDescription] = createSignal('');\n\n  onMount(async () => {\n    await loadGlossary();\n  });\n\n  const loadGlossary = async () => {\n    try {\n      const g = await glossary.getGlossary();\n      setTerms(g);\n      setError(null);\n    } catch (e) {\n      setError('Failed to load glossary');\n      console.error('[GlossarySettings] Load error:', e);\n    }\n  };\n\n  const showSuccess = (message: string) => {\n    setSuccess(message);\n    setTimeout(() => setSuccess(null), 3000);\n  };\n\n  const addNewTerm = async () => {\n    const source = newSource().trim();\n    const target = newTarget().trim();\n\n    if (!source || !target) {\n      setError('Source and target terms are required');\n      return;\n    }\n\n    try {\n      // Store language in description for filtering\n      const description = newDescription().trim();\n      const lang = newLanguage();\n      const fullDesc = lang !== 'all' ? `[${lang}] ${description}` : description;\n\n      await glossary.addTerm(source, target, newCaseSensitive(), fullDesc || undefined);\n\n      setNewSource('');\n      setNewTarget('');\n      setNewCaseSensitive(false);\n      setNewDescription('');\n      setNewLanguage('all');\n      setShowAddForm(false);\n\n      await loadGlossary();\n      showSuccess('Term added successfully');\n    } catch (e) {\n      setError('Failed to add term');\n      console.error('[GlossarySettings] Add error:', e);\n    }\n  };\n\n  const startEditing = (term: string, entry: GlossaryTerm) => {\n    setEditingTerm(term);\n    setEditTarget(entry.replacement);\n    setEditCaseSensitive(entry.caseSensitive);\n    setEditDescription(entry.description || '');\n  };\n\n  const saveEdit = async () => {\n    const term = editingTerm();\n    if (!term) return;\n\n    const target = editTarget().trim();\n    if (!target) {\n      setError('Target term is required');\n      return;\n    }\n\n    try {\n      await glossary.addTerm(term, target, editCaseSensitive(), editDescription().trim() || undefined);\n      setEditingTerm(null);\n      await loadGlossary();\n      showSuccess('Term updated');\n    } catch (e) {\n      setError('Failed to update term');\n      console.error('[GlossarySettings] Update error:', e);\n    }\n  };\n\n  const deleteTerm = async (term: string) => {\n    if (!confirm(`Delete term \"${term}\"?`)) return;\n\n    try {\n      await glossary.removeTerm(term);\n      await loadGlossary();\n      showSuccess('Term deleted');\n    } catch (e) {\n      setError('Failed to delete term');\n      console.error('[GlossarySettings] Delete error:', e);\n    }\n  };\n\n  const clearAllTerms = async () => {\n    if (!confirm('Delete ALL glossary terms? This cannot be undone.')) return;\n\n    try {\n      await glossary.clearGlossary();\n      await loadGlossary();\n      showSuccess('Glossary cleared');\n    } catch (e) {\n      setError('Failed to clear glossary');\n      console.error('[GlossarySettings] Clear error:', e);\n    }\n  };\n\n  const handleExport = async () => {\n    try {\n      const json = await glossary.exportGlossary();\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'translate-glossary.json';\n      a.click();\n      URL.revokeObjectURL(url);\n      showSuccess('Glossary exported');\n    } catch (e) {\n      setError('Failed to export glossary');\n      console.error('[GlossarySettings] Export error:', e);\n    }\n  };\n\n  const handleImport = async (event: Event) => {\n    const input = event.target as HTMLInputElement;\n    const file = input.files?.[0];\n    if (!file) return;\n\n    try {\n      const text = await file.text();\n      const count = await glossary.importGlossary(text);\n      await loadGlossary();\n      showSuccess(`Imported ${count} terms`);\n      input.value = '';\n    } catch (e) {\n      setError('Failed to import: ' + (e instanceof Error ? e.message : 'Invalid file'));\n      console.error('[GlossarySettings] Import error:', e);\n    }\n  };\n\n  // Extract language from description\n  const getTermLanguage = (description?: string): string => {\n    if (!description) return 'all';\n    const match = description.match(/^\\[([a-z]{2})\\]/);\n    return match ? match[1] : 'all';\n  };\n\n  // Filter terms by language and search\n  const filteredTerms = () => {\n    const lang = selectedLanguage();\n    const query = searchQuery().toLowerCase();\n\n    return Object.entries(terms()).filter(([term, entry]) => {\n      // Language filter\n      if (lang !== 'all') {\n        const termLang = getTermLanguage(entry.description);\n        if (termLang !== 'all' && termLang !== lang) return false;\n      }\n\n      // Search filter\n      if (query) {\n        return (\n          term.toLowerCase().includes(query) ||\n          entry.replacement.toLowerCase().includes(query) ||\n          entry.description?.toLowerCase().includes(query)\n        );\n      }\n\n      return true;\n    });\n  };\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"0.5rem\" }}>Glossary</h2>\n      <p class=\"section-description\">\n        Define custom term replacements. Terms are replaced before translation and the\n        replacement is used in the output. Useful for proper nouns, technical terms, or\n        company-specific vocabulary.\n      </p>\n\n      {/* Alerts */}\n      <Show when={error()}>\n        <div class=\"alert alert-error\">{error()}</div>\n      </Show>\n      <Show when={success()}>\n        <div class=\"alert alert-success\">{success()}</div>\n      </Show>\n\n      {/* Toolbar */}\n      <section class=\"settings-section\">\n        <div style={{ display: \"flex\", gap: \"1rem\", \"flex-wrap\": \"wrap\", \"align-items\": \"center\" }}>\n          <div style={{ flex: \"1\", \"min-width\": \"200px\" }}>\n            <input\n              type=\"text\"\n              class=\"form-input\"\n              placeholder=\"Search terms...\"\n              value={searchQuery()}\n              onInput={(e) => setSearchQuery(e.currentTarget.value)}\n            />\n          </div>\n\n          <select\n            class=\"form-select\"\n            style={{ width: \"160px\" }}\n            value={selectedLanguage()}\n            onChange={(e) => setSelectedLanguage(e.currentTarget.value)}\n          >\n            <For each={LANGUAGES}>\n              {(lang) => <option value={lang.code}>{lang.name}</option>}\n            </For>\n          </select>\n\n          <button\n            class=\"btn btn-primary\"\n            onClick={() => setShowAddForm(!showAddForm())}\n          >\n            {showAddForm() ? 'Cancel' : '+ Add Term'}\n          </button>\n        </div>\n      </section>\n\n      {/* Add Form */}\n      <Show when={showAddForm()}>\n        <section class=\"settings-section\">\n          <h3 class=\"section-title\" style={{ \"margin-bottom\": \"1rem\" }}>Add New Term</h3>\n\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label class=\"form-label\">Source Term</label>\n              <input\n                type=\"text\"\n                class=\"form-input\"\n                placeholder=\"e.g., API\"\n                value={newSource()}\n                onInput={(e) => setNewSource(e.currentTarget.value)}\n              />\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">Replacement</label>\n              <input\n                type=\"text\"\n                class=\"form-input\"\n                placeholder=\"e.g., rajapinta\"\n                value={newTarget()}\n                onInput={(e) => setNewTarget(e.currentTarget.value)}\n              />\n            </div>\n          </div>\n\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label class=\"form-label\">Language (optional)</label>\n              <select\n                class=\"form-select\"\n                value={newLanguage()}\n                onChange={(e) => setNewLanguage(e.currentTarget.value)}\n              >\n                <For each={LANGUAGES}>\n                  {(lang) => <option value={lang.code}>{lang.name}</option>}\n                </For>\n              </select>\n              <p class=\"form-hint\">Apply only when translating to this language</p>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">Description (optional)</label>\n              <input\n                type=\"text\"\n                class=\"form-input\"\n                placeholder=\"e.g., Technical term\"\n                value={newDescription()}\n                onInput={(e) => setNewDescription(e.currentTarget.value)}\n              />\n            </div>\n          </div>\n\n          <div class=\"toggle-container\" style={{ padding: \"0.5rem 0\" }}>\n            <div class=\"toggle-info\">\n              <span class=\"toggle-label\">Case sensitive</span>\n              <p class=\"toggle-description\">Match exact case only (API vs api)</p>\n            </div>\n            <label class=\"toggle-switch\">\n              <input\n                type=\"checkbox\"\n                checked={newCaseSensitive()}\n                onChange={(e) => setNewCaseSensitive(e.currentTarget.checked)}\n              />\n              <span class=\"toggle-slider\" />\n            </label>\n          </div>\n\n          <div class=\"btn-group\" style={{ \"margin-top\": \"1rem\" }}>\n            <button class=\"btn btn-primary\" onClick={addNewTerm}>\n              Add Term\n            </button>\n            <button class=\"btn btn-secondary\" onClick={() => setShowAddForm(false)}>\n              Cancel\n            </button>\n          </div>\n        </section>\n      </Show>\n\n      {/* Terms List */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <h3 class=\"section-title\">Terms ({filteredTerms().length})</h3>\n        </div>\n\n        <Show\n          when={filteredTerms().length > 0}\n          fallback={\n            <div class=\"empty-state\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M4 19.5A2.5 2.5 0 016.5 17H20\" stroke=\"currentColor\" stroke-width=\"2\" />\n                <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z\" stroke=\"currentColor\" stroke-width=\"2\" />\n              </svg>\n              <p>\n                {searchQuery() ? 'No matching terms found' : 'No glossary terms defined yet'}\n              </p>\n            </div>\n          }\n        >\n          <For each={filteredTerms()}>\n            {([term, entry]) => (\n              <Show\n                when={editingTerm() === term}\n                fallback={\n                  <div class=\"glossary-term\">\n                    <span class=\"glossary-source\">{term}</span>\n                    <span class=\"glossary-arrow\">{'->'}</span>\n                    <span class=\"glossary-target\">{entry.replacement}</span>\n                    <Show when={entry.caseSensitive}>\n                      <span class=\"badge badge-info\">Aa</span>\n                    </Show>\n                    <Show when={getTermLanguage(entry.description) !== 'all'}>\n                      <span class=\"glossary-language\">{getTermLanguage(entry.description)}</span>\n                    </Show>\n                    <div style={{ \"margin-left\": \"auto\", display: \"flex\", gap: \"0.5rem\" }}>\n                      <button\n                        class=\"btn btn-sm btn-ghost\"\n                        onClick={() => startEditing(term, entry)}\n                      >\n                        Edit\n                      </button>\n                      <button\n                        class=\"btn btn-sm btn-ghost\"\n                        style={{ color: \"var(--color-red-500)\" }}\n                        onClick={() => deleteTerm(term)}\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                }\n              >\n                {/* Edit mode */}\n                <div class=\"glossary-term\" style={{ \"flex-direction\": \"column\", \"align-items\": \"stretch\" }}>\n                  <div class=\"form-row\">\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Source</label>\n                      <input type=\"text\" class=\"form-input\" value={term} disabled />\n                    </div>\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Replacement</label>\n                      <input\n                        type=\"text\"\n                        class=\"form-input\"\n                        value={editTarget()}\n                        onInput={(e) => setEditTarget(e.currentTarget.value)}\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"form-group\">\n                    <label class=\"form-label\">Description</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-input\"\n                      value={editDescription()}\n                      onInput={(e) => setEditDescription(e.currentTarget.value)}\n                    />\n                  </div>\n\n                  <div class=\"toggle-container\" style={{ padding: \"0.25rem 0\" }}>\n                    <span class=\"toggle-label\">Case sensitive</span>\n                    <label class=\"toggle-switch\">\n                      <input\n                        type=\"checkbox\"\n                        checked={editCaseSensitive()}\n                        onChange={(e) => setEditCaseSensitive(e.currentTarget.checked)}\n                      />\n                      <span class=\"toggle-slider\" />\n                    </label>\n                  </div>\n\n                  <div class=\"btn-group\">\n                    <button class=\"btn btn-primary btn-sm\" onClick={saveEdit}>\n                      Save\n                    </button>\n                    <button class=\"btn btn-secondary btn-sm\" onClick={() => setEditingTerm(null)}>\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              </Show>\n            )}\n          </For>\n        </Show>\n      </section>\n\n      {/* Import/Export */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <h3 class=\"section-title\">Import / Export</h3>\n        </div>\n\n        <div class=\"btn-group\">\n          <button class=\"btn btn-secondary\" onClick={handleExport}>\n            Export JSON\n          </button>\n\n          <div class=\"file-input-wrapper\">\n            <button class=\"btn btn-secondary\">Import JSON</button>\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleImport}\n            />\n          </div>\n\n          <Show when={Object.keys(terms()).length > 0}>\n            <button class=\"btn btn-danger\" onClick={clearAllTerms}>\n              Clear All\n            </button>\n          </Show>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default GlossarySettings;\n","/**\n * Site Rules Settings Section\n * Per-domain translation preferences\n */\n\nimport { Component, createSignal, onMount, For, Show } from 'solid-js';\nimport { siteRules, type SiteRules, type SiteRulesStore } from '../../core/site-rules';\nimport type { TranslationProviderId, Strategy } from '../../types';\n\nconst LANGUAGES = [\n  { code: '', name: 'Use default' },\n  { code: 'auto', name: 'Auto Detect' },\n  { code: 'en', name: 'English' },\n  { code: 'fi', name: 'Finnish' },\n  { code: 'de', name: 'German' },\n  { code: 'fr', name: 'French' },\n  { code: 'es', name: 'Spanish' },\n  { code: 'sv', name: 'Swedish' },\n];\n\nconst PROVIDERS: Array<{ id: TranslationProviderId | ''; name: string }> = [\n  { id: '', name: 'Use default' },\n  { id: 'opus-mt', name: 'OPUS-MT (Local)' },\n  { id: 'translategemma', name: 'TranslateGemma (Local)' },\n  { id: 'chrome-builtin', name: 'Chrome Built-in' },\n  { id: 'deepl', name: 'DeepL' },\n  { id: 'openai', name: 'OpenAI' },\n  { id: 'google-cloud', name: 'Google Cloud' },\n  { id: 'anthropic', name: 'Claude' },\n];\n\nconst STRATEGIES: Array<{ id: Strategy | ''; name: string }> = [\n  { id: '', name: 'Use default' },\n  { id: 'smart', name: 'Smart' },\n  { id: 'fast', name: 'Fast' },\n  { id: 'quality', name: 'Quality' },\n  { id: 'cost', name: 'Cost' },\n  { id: 'balanced', name: 'Balanced' },\n];\n\nexport const SiteRulesSettings: Component = () => {\n  const [allRules, setAllRules] = createSignal<SiteRulesStore>({});\n  const [showAddForm, setShowAddForm] = createSignal(false);\n  const [editingPattern, setEditingPattern] = createSignal<string | null>(null);\n  const [error, setError] = createSignal<string | null>(null);\n  const [success, setSuccess] = createSignal<string | null>(null);\n\n  // Add form state\n  const [newPattern, setNewPattern] = createSignal('');\n  const [newAutoTranslate, setNewAutoTranslate] = createSignal(true);\n  const [newProvider, setNewProvider] = createSignal<TranslationProviderId | ''>('');\n  const [newSourceLang, setNewSourceLang] = createSignal('');\n  const [newTargetLang, setNewTargetLang] = createSignal('');\n  const [newStrategy, setNewStrategy] = createSignal<Strategy | ''>('');\n\n  // Edit form state\n  const [editAutoTranslate, setEditAutoTranslate] = createSignal(true);\n  const [editProvider, setEditProvider] = createSignal<TranslationProviderId | ''>('');\n  const [editSourceLang, setEditSourceLang] = createSignal('');\n  const [editTargetLang, setEditTargetLang] = createSignal('');\n  const [editStrategy, setEditStrategy] = createSignal<Strategy | ''>('');\n\n  onMount(async () => {\n    await loadRules();\n  });\n\n  const loadRules = async () => {\n    try {\n      const rules = await siteRules.getAllRules();\n      setAllRules(rules);\n      setError(null);\n    } catch (e) {\n      setError('Failed to load site rules');\n      console.error('[SiteRulesSettings] Load error:', e);\n    }\n  };\n\n  const showSuccess = (message: string) => {\n    setSuccess(message);\n    setTimeout(() => setSuccess(null), 3000);\n  };\n\n  const addRule = async () => {\n    const pattern = newPattern().trim().toLowerCase();\n\n    if (!pattern) {\n      setError('Domain pattern is required');\n      return;\n    }\n\n    // Validate pattern\n    if (!pattern.match(/^(\\*\\.)?[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z]{2,})+$/)) {\n      setError('Invalid domain pattern. Examples: example.com, *.example.com');\n      return;\n    }\n\n    try {\n      const rules: SiteRules = {\n        autoTranslate: newAutoTranslate(),\n        preferredProvider: newProvider() || undefined,\n        sourceLang: newSourceLang() || undefined,\n        targetLang: newTargetLang() || undefined,\n        strategy: newStrategy() || undefined,\n      };\n\n      await siteRules.setRules(pattern, rules);\n\n      // Reset form\n      setNewPattern('');\n      setNewAutoTranslate(true);\n      setNewProvider('');\n      setNewSourceLang('');\n      setNewTargetLang('');\n      setNewStrategy('');\n      setShowAddForm(false);\n\n      await loadRules();\n      showSuccess('Site rule added');\n    } catch (e) {\n      setError('Failed to add rule');\n      console.error('[SiteRulesSettings] Add error:', e);\n    }\n  };\n\n  const startEditing = (pattern: string, rules: SiteRules) => {\n    setEditingPattern(pattern);\n    setEditAutoTranslate(rules.autoTranslate);\n    setEditProvider(rules.preferredProvider || '');\n    setEditSourceLang(rules.sourceLang || '');\n    setEditTargetLang(rules.targetLang || '');\n    setEditStrategy(rules.strategy || '');\n  };\n\n  const saveEdit = async () => {\n    const pattern = editingPattern();\n    if (!pattern) return;\n\n    try {\n      const rules: SiteRules = {\n        autoTranslate: editAutoTranslate(),\n        preferredProvider: editProvider() || undefined,\n        sourceLang: editSourceLang() || undefined,\n        targetLang: editTargetLang() || undefined,\n        strategy: editStrategy() || undefined,\n      };\n\n      await siteRules.setRules(pattern, rules);\n      setEditingPattern(null);\n      await loadRules();\n      showSuccess('Site rule updated');\n    } catch (e) {\n      setError('Failed to update rule');\n      console.error('[SiteRulesSettings] Update error:', e);\n    }\n  };\n\n  const deleteRule = async (pattern: string) => {\n    if (!confirm(`Delete rule for \"${pattern}\"?`)) return;\n\n    try {\n      await siteRules.clearRules(pattern);\n      await loadRules();\n      showSuccess('Rule deleted');\n    } catch (e) {\n      setError('Failed to delete rule');\n      console.error('[SiteRulesSettings] Delete error:', e);\n    }\n  };\n\n  const handleExport = async () => {\n    try {\n      const json = await siteRules.exportRules();\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'translate-site-rules.json';\n      a.click();\n      URL.revokeObjectURL(url);\n      showSuccess('Rules exported');\n    } catch (e) {\n      setError('Failed to export rules');\n      console.error('[SiteRulesSettings] Export error:', e);\n    }\n  };\n\n  const handleImport = async (event: Event) => {\n    const input = event.target as HTMLInputElement;\n    const file = input.files?.[0];\n    if (!file) return;\n\n    try {\n      const text = await file.text();\n      const count = await siteRules.importRules(text);\n      await loadRules();\n      showSuccess(`Imported ${count} rules`);\n      input.value = '';\n    } catch (e) {\n      setError('Failed to import: ' + (e instanceof Error ? e.message : 'Invalid file'));\n      console.error('[SiteRulesSettings] Import error:', e);\n    }\n  };\n\n  const rulesCount = () => Object.keys(allRules()).length;\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"0.5rem\" }}>Site Rules</h2>\n      <p class=\"section-description\">\n        Configure translation settings for specific websites. Rules can include wildcard\n        patterns (e.g., *.example.com) to match multiple subdomains.\n      </p>\n\n      {/* Alerts */}\n      <Show when={error()}>\n        <div class=\"alert alert-error\">{error()}</div>\n      </Show>\n      <Show when={success()}>\n        <div class=\"alert alert-success\">{success()}</div>\n      </Show>\n\n      {/* Add Button */}\n      <section class=\"settings-section\">\n        <div style={{ display: \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" }}>\n          <span style={{ color: \"var(--color-gray-600)\" }}>\n            {rulesCount()} site {rulesCount() === 1 ? 'rule' : 'rules'} configured\n          </span>\n          <button\n            class=\"btn btn-primary\"\n            onClick={() => setShowAddForm(!showAddForm())}\n          >\n            {showAddForm() ? 'Cancel' : '+ Add Site Rule'}\n          </button>\n        </div>\n      </section>\n\n      {/* Add Form */}\n      <Show when={showAddForm()}>\n        <section class=\"settings-section\">\n          <h3 class=\"section-title\" style={{ \"margin-bottom\": \"1rem\" }}>Add Site Rule</h3>\n\n          <div class=\"form-group\">\n            <label class=\"form-label\">Domain Pattern</label>\n            <input\n              type=\"text\"\n              class=\"form-input\"\n              placeholder=\"example.com or *.example.com\"\n              value={newPattern()}\n              onInput={(e) => setNewPattern(e.currentTarget.value)}\n            />\n            <p class=\"form-hint\">Use *.domain.com to match all subdomains</p>\n          </div>\n\n          <div class=\"toggle-container\">\n            <div class=\"toggle-info\">\n              <span class=\"toggle-label\">Auto-translate</span>\n              <p class=\"toggle-description\">Automatically translate pages on this site</p>\n            </div>\n            <label class=\"toggle-switch\">\n              <input\n                type=\"checkbox\"\n                checked={newAutoTranslate()}\n                onChange={(e) => setNewAutoTranslate(e.currentTarget.checked)}\n              />\n              <span class=\"toggle-slider\" />\n            </label>\n          </div>\n\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label class=\"form-label\">Provider</label>\n              <select\n                class=\"form-select\"\n                value={newProvider()}\n                onChange={(e) => setNewProvider(e.currentTarget.value as TranslationProviderId | '')}\n              >\n                <For each={PROVIDERS}>\n                  {(p) => <option value={p.id}>{p.name}</option>}\n                </For>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">Strategy</label>\n              <select\n                class=\"form-select\"\n                value={newStrategy()}\n                onChange={(e) => setNewStrategy(e.currentTarget.value as Strategy | '')}\n              >\n                <For each={STRATEGIES}>\n                  {(s) => <option value={s.id}>{s.name}</option>}\n                </For>\n              </select>\n            </div>\n          </div>\n\n          <div class=\"form-row\">\n            <div class=\"form-group\">\n              <label class=\"form-label\">Source Language</label>\n              <select\n                class=\"form-select\"\n                value={newSourceLang()}\n                onChange={(e) => setNewSourceLang(e.currentTarget.value)}\n              >\n                <For each={LANGUAGES}>\n                  {(lang) => <option value={lang.code}>{lang.name}</option>}\n                </For>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">Target Language</label>\n              <select\n                class=\"form-select\"\n                value={newTargetLang()}\n                onChange={(e) => setNewTargetLang(e.currentTarget.value)}\n              >\n                <For each={LANGUAGES.filter(l => l.code !== 'auto')}>\n                  {(lang) => <option value={lang.code}>{lang.name}</option>}\n                </For>\n              </select>\n            </div>\n          </div>\n\n          <div class=\"btn-group\" style={{ \"margin-top\": \"1rem\" }}>\n            <button class=\"btn btn-primary\" onClick={addRule}>\n              Add Rule\n            </button>\n            <button class=\"btn btn-secondary\" onClick={() => setShowAddForm(false)}>\n              Cancel\n            </button>\n          </div>\n        </section>\n      </Show>\n\n      {/* Rules List */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <h3 class=\"section-title\">Site Rules</h3>\n        </div>\n\n        <Show\n          when={rulesCount() > 0}\n          fallback={\n            <div class=\"empty-state\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\" />\n                <path d=\"M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z\" stroke=\"currentColor\" stroke-width=\"2\" />\n              </svg>\n              <p>No site rules configured</p>\n              <p style={{ \"font-size\": \"0.875rem\" }}>\n                Add rules to customize translation behavior for specific websites.\n              </p>\n            </div>\n          }\n        >\n          <For each={Object.entries(allRules())}>\n            {([pattern, rules]) => (\n              <Show\n                when={editingPattern() === pattern}\n                fallback={\n                  <div class=\"site-rule\">\n                    <div style={{ flex: \"1\" }}>\n                      <div class=\"site-domain\">{pattern}</div>\n                      <div class=\"site-settings\">\n                        <span class={`badge ${rules.autoTranslate ? 'badge-success' : 'badge-neutral'}`}>\n                          {rules.autoTranslate ? 'Auto' : 'Manual'}\n                        </span>\n                        <Show when={rules.preferredProvider}>\n                          <span>{PROVIDERS.find(p => p.id === rules.preferredProvider)?.name}</span>\n                        </Show>\n                        <Show when={rules.targetLang}>\n                          <span>{'->'} {rules.targetLang}</span>\n                        </Show>\n                      </div>\n                    </div>\n                    <div class=\"btn-group\">\n                      <button\n                        class=\"btn btn-sm btn-ghost\"\n                        onClick={() => startEditing(pattern, rules)}\n                      >\n                        Edit\n                      </button>\n                      <button\n                        class=\"btn btn-sm btn-ghost\"\n                        style={{ color: \"var(--color-red-500)\" }}\n                        onClick={() => deleteRule(pattern)}\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                }\n              >\n                {/* Edit mode */}\n                <div class=\"site-rule\" style={{ \"flex-direction\": \"column\", \"align-items\": \"stretch\", padding: \"1rem\" }}>\n                  <div style={{ \"font-weight\": \"600\", \"margin-bottom\": \"1rem\" }}>{pattern}</div>\n\n                  <div class=\"toggle-container\" style={{ padding: \"0.25rem 0\" }}>\n                    <span class=\"toggle-label\">Auto-translate</span>\n                    <label class=\"toggle-switch\">\n                      <input\n                        type=\"checkbox\"\n                        checked={editAutoTranslate()}\n                        onChange={(e) => setEditAutoTranslate(e.currentTarget.checked)}\n                      />\n                      <span class=\"toggle-slider\" />\n                    </label>\n                  </div>\n\n                  <div class=\"form-row\">\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Provider</label>\n                      <select\n                        class=\"form-select\"\n                        value={editProvider()}\n                        onChange={(e) => setEditProvider(e.currentTarget.value as TranslationProviderId | '')}\n                      >\n                        <For each={PROVIDERS}>\n                          {(p) => <option value={p.id}>{p.name}</option>}\n                        </For>\n                      </select>\n                    </div>\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Strategy</label>\n                      <select\n                        class=\"form-select\"\n                        value={editStrategy()}\n                        onChange={(e) => setEditStrategy(e.currentTarget.value as Strategy | '')}\n                      >\n                        <For each={STRATEGIES}>\n                          {(s) => <option value={s.id}>{s.name}</option>}\n                        </For>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div class=\"form-row\">\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Source Language</label>\n                      <select\n                        class=\"form-select\"\n                        value={editSourceLang()}\n                        onChange={(e) => setEditSourceLang(e.currentTarget.value)}\n                      >\n                        <For each={LANGUAGES}>\n                          {(lang) => <option value={lang.code}>{lang.name}</option>}\n                        </For>\n                      </select>\n                    </div>\n                    <div class=\"form-group\">\n                      <label class=\"form-label\">Target Language</label>\n                      <select\n                        class=\"form-select\"\n                        value={editTargetLang()}\n                        onChange={(e) => setEditTargetLang(e.currentTarget.value)}\n                      >\n                        <For each={LANGUAGES.filter(l => l.code !== 'auto')}>\n                          {(lang) => <option value={lang.code}>{lang.name}</option>}\n                        </For>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div class=\"btn-group\" style={{ \"margin-top\": \"0.5rem\" }}>\n                    <button class=\"btn btn-primary btn-sm\" onClick={saveEdit}>\n                      Save\n                    </button>\n                    <button class=\"btn btn-secondary btn-sm\" onClick={() => setEditingPattern(null)}>\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              </Show>\n            )}\n          </For>\n        </Show>\n      </section>\n\n      {/* Import/Export */}\n      <section class=\"settings-section\">\n        <div class=\"section-header\">\n          <h3 class=\"section-title\">Import / Export</h3>\n        </div>\n\n        <div class=\"btn-group\">\n          <button class=\"btn btn-secondary\" onClick={handleExport}>\n            Export JSON\n          </button>\n\n          <div class=\"file-input-wrapper\">\n            <button class=\"btn btn-secondary\">Import JSON</button>\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleImport}\n            />\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default SiteRulesSettings;\n","/**\n * Cache Settings Section\n * Cache size, hit rate, clear cache\n */\n\nimport { Component, createSignal, onMount, Show } from 'solid-js';\nimport type { TranslationCacheStats } from '../../core/translation-cache';\n\n// Format bytes to human-readable\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\n// Format percentage\nfunction formatPercent(value: number): string {\n  return (value * 100).toFixed(1) + '%';\n}\n\n// Format date\nfunction formatDate(timestamp: number | null): string {\n  if (!timestamp) return 'N/A';\n  return new Date(timestamp).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nexport const CacheSettings: Component = () => {\n  const [loading, setLoading] = createSignal(true);\n  const [clearing, setClearing] = createSignal(false);\n  const [stats, setStats] = createSignal<TranslationCacheStats | null>(null);\n  const [error, setError] = createSignal<string | null>(null);\n  const [success, setSuccess] = createSignal<string | null>(null);\n\n  onMount(async () => {\n    await loadStats();\n  });\n\n  const loadStats = async () => {\n    setLoading(true);\n\n    try {\n      // Try to get cache stats from background\n      const response = await chrome.runtime.sendMessage({ type: 'getCacheStats' });\n\n      if (response?.stats) {\n        setStats(response.stats);\n      } else {\n        // Fallback: estimate from storage\n        const estimate = await navigator.storage?.estimate?.() || { usage: 0, quota: 0 };\n\n        setStats({\n          entries: 0,\n          totalSize: estimate.usage || 0,\n          maxSize: 100 * 1024 * 1024, // 100MB default\n          hits: 0,\n          misses: 0,\n          hitRate: 0,\n          oldestTimestamp: null,\n          newestTimestamp: null,\n        });\n      }\n    } catch (e) {\n      console.error('[CacheSettings] Failed to load stats:', e);\n      setError('Failed to load cache statistics');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showSuccess = (message: string) => {\n    setSuccess(message);\n    setTimeout(() => setSuccess(null), 3000);\n  };\n\n  const clearCache = async () => {\n    if (!confirm('Clear all cached translations? This cannot be undone.')) return;\n\n    setClearing(true);\n    setError(null);\n\n    try {\n      await chrome.runtime.sendMessage({ type: 'clearCache' });\n      await loadStats();\n      showSuccess('Cache cleared successfully');\n    } catch (e) {\n      console.error('[CacheSettings] Failed to clear cache:', e);\n      setError('Failed to clear cache');\n    } finally {\n      setClearing(false);\n    }\n  };\n\n  const usagePercent = () => {\n    const s = stats();\n    if (!s || s.maxSize === 0) return 0;\n    return Math.min(100, (s.totalSize / s.maxSize) * 100);\n  };\n\n  return (\n    <div>\n      <h2 class=\"section-title\" style={{ \"margin-bottom\": \"0.5rem\" }}>Translation Cache</h2>\n      <p class=\"section-description\">\n        Translations are cached locally to improve performance and reduce API calls.\n        The cache uses IndexedDB with LRU (Least Recently Used) eviction when full.\n      </p>\n\n      {/* Alerts */}\n      <Show when={error()}>\n        <div class=\"alert alert-error\">{error()}</div>\n      </Show>\n      <Show when={success()}>\n        <div class=\"alert alert-success\">{success()}</div>\n      </Show>\n\n      <Show when={loading()}>\n        <div class=\"settings-section\">\n          <div class=\"loading\" style={{ height: \"100px\" }}>\n            <span class=\"spinner\" />\n          </div>\n        </div>\n      </Show>\n\n      <Show when={!loading() && stats()}>\n        {/* Stats Cards */}\n        <div class=\"cache-stats\">\n          <div class=\"stat-card\">\n            <div class=\"stat-value\">{stats()!.entries.toLocaleString()}</div>\n            <div class=\"stat-label\">Cached Entries</div>\n          </div>\n\n          <div class=\"stat-card\">\n            <div class=\"stat-value\">{formatBytes(stats()!.totalSize)}</div>\n            <div class=\"stat-label\">Storage Used</div>\n          </div>\n\n          <div class=\"stat-card\">\n            <div class=\"stat-value\">{formatPercent(stats()!.hitRate)}</div>\n            <div class=\"stat-label\">Hit Rate</div>\n          </div>\n        </div>\n\n        {/* Storage Usage */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <div>\n              <h3 class=\"section-title\">Storage Usage</h3>\n              <p class=\"section-subtitle\">Cache storage allocation and usage</p>\n            </div>\n          </div>\n\n          <div style={{ \"margin-bottom\": \"1rem\" }}>\n            <div style={{ display: \"flex\", \"justify-content\": \"space-between\", \"margin-bottom\": \"0.5rem\" }}>\n              <span style={{ \"font-weight\": \"500\" }}>{formatBytes(stats()!.totalSize)}</span>\n              <span style={{ color: \"var(--color-gray-500)\" }}>\n                of {formatBytes(stats()!.maxSize)} maximum\n              </span>\n            </div>\n            <div class=\"progress-bar\">\n              <div\n                class={`progress-fill ${usagePercent() > 80 ? 'danger' : usagePercent() > 50 ? 'warning' : ''}`}\n                style={{ width: `${usagePercent()}%` }}\n              />\n            </div>\n          </div>\n\n          <div style={{ display: \"flex\", \"justify-content\": \"space-between\", \"font-size\": \"0.875rem\", color: \"var(--color-gray-600)\" }}>\n            <div>\n              <strong>Oldest entry:</strong> {formatDate(stats()!.oldestTimestamp)}\n            </div>\n            <div>\n              <strong>Newest entry:</strong> {formatDate(stats()!.newestTimestamp)}\n            </div>\n          </div>\n        </section>\n\n        {/* Performance Stats */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <div>\n              <h3 class=\"section-title\">Performance</h3>\n              <p class=\"section-subtitle\">Cache hit and miss statistics</p>\n            </div>\n          </div>\n\n          <div style={{ display: \"grid\", \"grid-template-columns\": \"repeat(3, 1fr)\", gap: \"1rem\" }}>\n            <div>\n              <div style={{ \"font-size\": \"1.25rem\", \"font-weight\": \"600\", color: \"var(--color-green-600)\" }}>\n                {stats()!.hits.toLocaleString()}\n              </div>\n              <div style={{ \"font-size\": \"0.75rem\", color: \"var(--color-gray-500)\" }}>Cache Hits</div>\n            </div>\n\n            <div>\n              <div style={{ \"font-size\": \"1.25rem\", \"font-weight\": \"600\", color: \"var(--color-gray-600)\" }}>\n                {stats()!.misses.toLocaleString()}\n              </div>\n              <div style={{ \"font-size\": \"0.75rem\", color: \"var(--color-gray-500)\" }}>Cache Misses</div>\n            </div>\n\n            <div>\n              <div style={{ \"font-size\": \"1.25rem\", \"font-weight\": \"600\", color: \"var(--color-primary-600)\" }}>\n                {(stats()!.hits + stats()!.misses).toLocaleString()}\n              </div>\n              <div style={{ \"font-size\": \"0.75rem\", color: \"var(--color-gray-500)\" }}>Total Lookups</div>\n            </div>\n          </div>\n\n          <Show when={stats()!.hitRate > 0}>\n            <div class=\"alert alert-info\" style={{ \"margin-top\": \"1rem\" }}>\n              Your cache hit rate of {formatPercent(stats()!.hitRate)} means {formatPercent(stats()!.hitRate)} of\n              translations are served from cache, saving API calls and improving response time.\n            </div>\n          </Show>\n        </section>\n\n        {/* Clear Cache */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <div>\n              <h3 class=\"section-title\">Clear Cache</h3>\n              <p class=\"section-subtitle\">Remove all cached translations</p>\n            </div>\n          </div>\n\n          <p style={{ \"font-size\": \"0.875rem\", color: \"var(--color-gray-600)\", \"margin-bottom\": \"1rem\" }}>\n            Clearing the cache will remove all stored translations. Future translations\n            will need to be fetched again, which may result in increased API usage.\n          </p>\n\n          <div class=\"btn-group\">\n            <button\n              class=\"btn btn-danger\"\n              onClick={clearCache}\n              disabled={clearing() || stats()!.entries === 0}\n            >\n              {clearing() ? (\n                <>\n                  <span class=\"spinner\" />\n                  Clearing...\n                </>\n              ) : (\n                'Clear Cache'\n              )}\n            </button>\n\n            <button class=\"btn btn-secondary\" onClick={loadStats}>\n              Refresh Stats\n            </button>\n          </div>\n        </section>\n\n        {/* Info */}\n        <section class=\"settings-section\">\n          <div class=\"section-header\">\n            <h3 class=\"section-title\">How Caching Works</h3>\n          </div>\n          <div style={{ \"font-size\": \"0.875rem\", color: \"var(--color-gray-600)\" }}>\n            <p style={{ \"margin-bottom\": \"0.75rem\" }}>\n              <strong>LRU Eviction:</strong> When the cache reaches its size limit,\n              the least recently used entries are automatically removed to make room\n              for new translations.\n            </p>\n            <p style={{ \"margin-bottom\": \"0.75rem\" }}>\n              <strong>Cache Keys:</strong> Translations are cached based on the\n              source text, source language, target language, and provider. The same\n              text translated with different settings will have separate cache entries.\n            </p>\n            <p>\n              <strong>Persistence:</strong> The cache is stored in IndexedDB and\n              persists across browser restarts. It is not synced across devices.\n            </p>\n          </div>\n        </section>\n      </Show>\n    </div>\n  );\n};\n\nexport default CacheSettings;\n","/**\n * Options Page - Full settings interface for TRANSLATE! extension\n * Sections: General, Cloud Providers, Local Models, Glossary, Site Rules, Cache\n */\n\nimport { createSignal, onMount, Show, For } from 'solid-js';\nimport { GeneralSettings } from './components/GeneralSettings';\nimport { CloudProviders } from './components/CloudProviders';\nimport { LocalModels } from './components/LocalModels';\nimport { GlossarySettings } from './components/GlossarySettings';\nimport { SiteRulesSettings } from './components/SiteRulesSettings';\nimport { CacheSettings } from './components/CacheSettings';\nimport './styles/options.css';\n\ntype Tab = 'general' | 'cloud' | 'local' | 'glossary' | 'sites' | 'cache';\n\nconst TABS: Array<{ id: Tab; label: string; icon: string }> = [\n  { id: 'general', label: 'General', icon: 'settings' },\n  { id: 'cloud', label: 'Cloud Providers', icon: 'cloud' },\n  { id: 'local', label: 'Local Models', icon: 'cpu' },\n  { id: 'glossary', label: 'Glossary', icon: 'book' },\n  { id: 'sites', label: 'Site Rules', icon: 'globe' },\n  { id: 'cache', label: 'Cache', icon: 'database' },\n];\n\nexport default function Options() {\n  const [activeTab, setActiveTab] = createSignal<Tab>('general');\n  const [loading, setLoading] = createSignal(true);\n\n  onMount(() => {\n    // Check for tab parameter in URL\n    const params = new URLSearchParams(window.location.search);\n    const tab = params.get('tab') as Tab | null;\n    if (tab && TABS.some(t => t.id === tab)) {\n      setActiveTab(tab);\n    }\n    setLoading(false);\n  });\n\n  const renderIcon = (icon: string) => {\n    switch (icon) {\n      case 'settings':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <path\n              d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            />\n          </svg>\n        );\n      case 'cloud':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path\n              d=\"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        );\n      case 'cpu':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <rect x=\"9\" y=\"9\" width=\"6\" height=\"6\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <path d=\"M9 1v3M15 1v3M9 20v3M15 20v3M20 9h3M20 15h3M1 9h3M1 15h3\" stroke=\"currentColor\" stroke-width=\"2\" />\n          </svg>\n        );\n      case 'book':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path\n              d=\"M4 19.5A2.5 2.5 0 016.5 17H20\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n            <path\n              d=\"M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        );\n      case 'globe':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <path d=\"M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z\" stroke=\"currentColor\" stroke-width=\"2\" />\n          </svg>\n        );\n      case 'database':\n        return (\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <path d=\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\" stroke=\"currentColor\" stroke-width=\"2\" />\n            <path d=\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\" stroke=\"currentColor\" stroke-width=\"2\" />\n          </svg>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div class=\"options-container\">\n      {/* Header */}\n      <header class=\"options-header\">\n        <div class=\"header-brand\">\n          <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"brand-logo\">\n            <path\n              d=\"M3 5h12M9 3v2m1.048 3.5A3.5 3.5 0 016.5 12a3.5 3.5 0 01-2.45-5.943M6 16l-2 6 3-2 3 2-2-6M21 21l-6-6m6 0l-6 6M15 15l6-6m-6 0l6 6\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n          <div class=\"brand-text\">\n            <h1>TRANSLATE! Settings</h1>\n            <span class=\"brand-subtitle\">Configure your translation preferences</span>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <div class=\"options-content\">\n        {/* Sidebar Navigation */}\n        <nav class=\"options-nav\">\n          <For each={TABS}>\n            {(tab) => (\n              <button\n                class={`nav-item ${activeTab() === tab.id ? 'active' : ''}`}\n                onClick={() => setActiveTab(tab.id)}\n              >\n                {renderIcon(tab.icon)}\n                <span>{tab.label}</span>\n              </button>\n            )}\n          </For>\n        </nav>\n\n        {/* Tab Content */}\n        <main class=\"options-main\">\n          <Show when={!loading()} fallback={<div class=\"loading\">Loading...</div>}>\n            <Show when={activeTab() === 'general'}>\n              <GeneralSettings />\n            </Show>\n            <Show when={activeTab() === 'cloud'}>\n              <CloudProviders />\n            </Show>\n            <Show when={activeTab() === 'local'}>\n              <LocalModels />\n            </Show>\n            <Show when={activeTab() === 'glossary'}>\n              <GlossarySettings />\n            </Show>\n            <Show when={activeTab() === 'sites'}>\n              <SiteRulesSettings />\n            </Show>\n            <Show when={activeTab() === 'cache'}>\n              <CacheSettings />\n            </Show>\n          </Show>\n        </main>\n      </div>\n\n      {/* Footer */}\n      <footer class=\"options-footer\">\n        <span>TRANSLATE! v2.0 by Mikko</span>\n        <span class=\"footer-divider\">|</span>\n        <a href=\"https://github.com/your-repo\" target=\"_blank\" rel=\"noopener noreferrer\">\n          Documentation\n        </a>\n      </footer>\n    </div>\n  );\n}\n","/* @refresh reload */\nimport { render } from 'solid-js/web';\nimport Options from './Options';\n\nconst root = document.getElementById('root');\n\nif (root) {\n  render(() => <Options />, root);\n}\n"],"names":["LANGUAGES","code","name","STRATEGIES","id","description","GeneralSettings","sourceLang","setSourceLang","createSignal","targetLang","setTargetLang","strategy","setStrategy","autoTranslate","setAutoTranslate","saved","setSaved","saving","setSaving","onMount","stored","safeStorageGet","undefined","saveSettings","success","safeStorageSet","setTimeout","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","_el$4","_el$5","_el$6","_el$7","_el$8","_el$9","_el$0","_el$1","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","addEventListener","e","currentTarget","value","_$insert","_$createComponent","For","each","children","_el$23","_tmpl$2","lang","_$effect","filter","l","_el$24","_el$25","_tmpl$3","_el$26","s","checked","$$click","_c$","_$memo","_tmpl$4","disabled","_$delegateEvents","CLOUD_PROVIDERS","keyField","enabledField","hasProTier","proField","placeholder","helpUrl","testEndpoint","modelField","models","CloudProviders","providerStatus","setProviderStatus","editingProvider","setEditingProvider","apiKeyInput","setApiKeyInput","isProTier","setIsProTier","selectedModel","setSelectedModel","error","setError","loadProviderStatus","status","keys","flatMap","p","fields","push","chrome","storage","local","get","provider","hasKey","enabled","isPro","model","console","startEditing","providerId","find","cancelEditing","saveApiKey","key","trim","data","set","prev","removeApiKey","confirm","keysToRemove","remove","toggleProvider","newEnabled","testProvider","testing","testResult","response","runtime","sendMessage","type","testMessage","message","Error","isEditing","_tmpl$12","Show","when","_$className","_tmpl$5","_tmpl$6","_tmpl$13","_tmpl$7","_tmpl$1","_el$27","_el$28","_el$29","_tmpl$8","$$input","_tmpl$9","length","_tmpl$0","_el$34","_tmpl$14","_p$","_v$","_v$2","_v$3","_$setAttribute","t","a","_el$30","_tmpl$11","_el$31","_el$32","_tmpl$10","formatBytes","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","formatDate","timestamp","Date","toLocaleDateString","year","month","day","LocalModels","loading","setLoading","stats","setStats","totalUsed","quota","deleting","setDeleting","loadModelStats","estimate","usage","navigator","downloadedModels","knownModels","size","mergedModels","deleteModel","modelId","m","alert","clearAllModels","window","caches","includes","delete","usagePercent","min","_$setStyleProperty","fallback","lastUsed","GlossarySettings","terms","setTerms","selectedLanguage","setSelectedLanguage","searchQuery","setSearchQuery","showAddForm","setShowAddForm","setSuccess","newSource","setNewSource","newTarget","setNewTarget","newCaseSensitive","setNewCaseSensitive","newDescription","setNewDescription","newLanguage","setNewLanguage","editingTerm","setEditingTerm","editTarget","setEditTarget","editCaseSensitive","setEditCaseSensitive","editDescription","setEditDescription","loadGlossary","g","glossary","getGlossary","showSuccess","addNewTerm","source","target","fullDesc","addTerm","term","entry","replacement","caseSensitive","saveEdit","deleteTerm","removeTerm","clearAllTerms","clearGlossary","handleExport","json","exportGlossary","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","handleImport","event","input","file","files","text","count","importGlossary","getTermLanguage","match","filteredTerms","query","toLowerCase","Object","entries","termLang","_el$33","_el$35","_el$36","_el$38","_el$39","_el$40","_el$41","_el$42","_el$43","_el$44","_el$45","_el$47","_el$48","_el$49","_el$50","_el$51","_el$70","_el$71","_el$72","_el$73","_el$76","_el$77","_el$78","_el$75","_el$52","_el$53","_el$54","_el$55","_el$56","_el$57","_el$58","_el$59","_el$60","_el$61","_el$62","_el$63","_el$64","_el$65","_el$66","_el$67","_el$68","_el$69","_el$46","PROVIDERS","SiteRulesSettings","allRules","setAllRules","editingPattern","setEditingPattern","newPattern","setNewPattern","newAutoTranslate","setNewAutoTranslate","newProvider","setNewProvider","newSourceLang","setNewSourceLang","newTargetLang","setNewTargetLang","newStrategy","setNewStrategy","editAutoTranslate","setEditAutoTranslate","editProvider","setEditProvider","editSourceLang","setEditSourceLang","editTargetLang","setEditTargetLang","editStrategy","setEditStrategy","loadRules","rules","siteRules","getAllRules","addRule","pattern","preferredProvider","setRules","deleteRule","clearRules","exportRules","importRules","rulesCount","_el$37","_el$79","_el$80","_el$81","_el$86","_el$87","_el$88","_el$82","_el$83","_el$74","_el$89","_el$90","_el$91","_el$92","formatPercent","hour","minute","CacheSettings","clearing","setClearing","loadStats","totalSize","maxSize","hits","misses","hitRate","oldestTimestamp","newestTimestamp","clearCache","toLocaleString","TABS","label","icon","Options","activeTab","setActiveTab","tab","URLSearchParams","location","search","some","renderIcon","root","getElementById","render"],"mappings":"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"}