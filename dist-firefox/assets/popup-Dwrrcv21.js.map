{"version":3,"file":"popup-Dwrrcv21.js","sources":["../../src/popup/components/ProviderStatus.tsx","../../src/popup/components/ModelSelector.tsx","../../src/popup/components/LanguageSelector.tsx","../../src/popup/components/StrategySelector.tsx","../../src/popup/components/UsageBar.tsx","../../src/popup/components/CostMonitor.tsx","../../src/popup/components/ModelStatus.tsx","../../src/popup/App.tsx","../../src/popup/index.tsx"],"sourcesContent":["import { Component } from 'solid-js';\n\ninterface Props {\n  name: string;\n  status: 'ready' | 'loading' | 'error';\n}\n\nexport const ProviderStatus: Component<Props> = (props) => {\n  const statusIndicator = () => {\n    switch (props.status) {\n      case 'ready':\n        return { icon: '', text: 'Ready', class: 'status--ready' };\n      case 'loading':\n        return { icon: '', text: 'Loading...', class: 'status--loading' };\n      case 'error':\n        return { icon: '', text: 'Error', class: 'status--error' };\n    }\n  };\n\n  return (\n    <div class=\"provider-status\">\n      <div class=\"provider-info\">\n        <span class=\"provider-name\">{props.name}</span>\n        <span class={`status-indicator ${statusIndicator().class}`}>\n          <span class=\"status-icon\">{statusIndicator().icon}</span>\n          <span class=\"status-text\">{statusIndicator().text}</span>\n        </span>\n      </div>\n    </div>\n  );\n};\n","import { Component, Show, createSignal, onMount, For } from 'solid-js';\nimport type { TranslationProviderId } from '../../types';\n\nexport interface ModelInfo {\n  id: TranslationProviderId;\n  name: string;\n  tag: string;\n  description: string;\n  size: string;\n  isCloud?: boolean;\n  costEstimate?: string; // e.g., \"~$0.02/1K chars\"\n}\n\nexport interface ModelDownloadStatus {\n  isDownloading: boolean;\n  progress: number;\n  isDownloaded: boolean;\n  error: string | null;\n}\n\nexport interface CloudProviderStatus {\n  configured: boolean;\n  usage?: {\n    tokens: number;\n    cost: number;\n    limitReached?: boolean;\n  };\n}\n\ninterface Props {\n  selected: TranslationProviderId;\n  onChange: (provider: TranslationProviderId) => void;\n  downloadStatus?: Record<TranslationProviderId, ModelDownloadStatus>;\n  cloudStatus?: Record<string, CloudProviderStatus>;\n}\n\n// Local models (no API key required)\nexport const LOCAL_MODELS: ModelInfo[] = [\n  {\n    id: 'opus-mt',\n    name: 'OPUS-MT',\n    tag: 'Fast',\n    description: 'Helsinki-NLP',\n    size: '~170MB per pair',\n  },\n  {\n    id: 'translategemma',\n    name: 'TranslateGemma',\n    tag: 'Quality',\n    description: 'Google 4B',\n    size: '~3.6GB',\n  },\n  {\n    id: 'chrome-builtin',\n    name: 'Chrome Built-in',\n    tag: 'Native',\n    description: 'Chrome 138+',\n    size: 'No download',\n  },\n];\n\n// Cloud providers (API key required)\nexport const CLOUD_PROVIDERS: ModelInfo[] = [\n  {\n    id: 'deepl',\n    name: 'DeepL',\n    tag: 'Premium',\n    description: 'Best quality',\n    size: 'API',\n    isCloud: true,\n    costEstimate: '~$20/1M chars',\n  },\n  {\n    id: 'openai',\n    name: 'OpenAI',\n    tag: 'GPT-4',\n    description: 'AI translation',\n    size: 'API',\n    isCloud: true,\n    costEstimate: '~$5/1M tokens',\n  },\n  {\n    id: 'anthropic',\n    name: 'Claude',\n    tag: 'AI',\n    description: 'Anthropic',\n    size: 'API',\n    isCloud: true,\n    costEstimate: '~$3/1M tokens',\n  },\n  {\n    id: 'google-cloud',\n    name: 'Google',\n    tag: 'Cloud',\n    description: 'Google Cloud',\n    size: 'API',\n    isCloud: true,\n    costEstimate: '~$20/1M chars',\n  },\n];\n\n// Combined list for backward compatibility\nexport const MODELS: ModelInfo[] = [...LOCAL_MODELS, ...CLOUD_PROVIDERS];\n\n/**\n * Cloud icon SVG component\n */\nconst CloudIcon: Component = () => (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"cloud-icon\">\n    <path\n      d=\"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\n\n/**\n * Model selector component with download status indicators.\n * Shows available translation models with their characteristics and current status.\n * Includes cloud providers with API key status.\n */\nexport const ModelSelector: Component<Props> = (props) => {\n  // Track cloud provider availability from storage\n  const [cloudApiStatus, setCloudApiStatus] = createSignal<Record<string, boolean>>({});\n\n  onMount(async () => {\n    // Check which cloud providers have API keys configured\n    try {\n      const response = await chrome.runtime.sendMessage({ type: 'getCloudProviderStatus' });\n      if (response?.status) {\n        setCloudApiStatus(response.status);\n      }\n    } catch {\n      // Ignore errors - cloud providers just won't show as configured\n    }\n  });\n\n  const getStatus = (modelId: TranslationProviderId): ModelDownloadStatus => {\n    return props.downloadStatus?.[modelId] ?? {\n      isDownloading: false,\n      progress: 0,\n      isDownloaded: false,\n      error: null,\n    };\n  };\n\n  const getStatusClass = (modelId: TranslationProviderId): string => {\n    const status = getStatus(modelId);\n    if (status.error) return 'model-error';\n    if (status.isDownloading) return 'model-downloading';\n    if (status.isDownloaded) return 'model-ready';\n    return '';\n  };\n\n  const isCloudConfigured = (modelId: TranslationProviderId): boolean => {\n    return cloudApiStatus()[modelId] ?? false;\n  };\n\n  const openOptions = () => {\n    chrome.runtime.openOptionsPage();\n  };\n\n  const renderModelButton = (model: ModelInfo) => {\n    const status = () => getStatus(model.id);\n    const isActive = () => props.selected === model.id;\n    const isCloud = model.isCloud ?? false;\n    const configured = () => isCloud ? isCloudConfigured(model.id) : true;\n\n    return (\n      <button\n        class={`model-selector-button ${isActive() ? 'active' : ''} ${getStatusClass(model.id)} ${isCloud ? 'cloud-provider' : ''} ${isCloud && !configured() ? 'unconfigured' : ''}`}\n        onClick={() => {\n          if (isCloud && !configured()) {\n            openOptions();\n          } else {\n            props.onChange(model.id);\n          }\n        }}\n        disabled={status().isDownloading}\n        aria-pressed={isActive()}\n        aria-label={`Select ${model.name} - ${model.tag} - ${model.size}`}\n      >\n        <div class=\"model-selector-header\">\n          <span class=\"model-selector-name\">\n            <Show when={isCloud}>\n              <CloudIcon />\n            </Show>\n            {model.name}\n          </span>\n          <span class=\"model-selector-tag\">{model.tag}</span>\n        </div>\n\n        <div class=\"model-selector-meta\">\n          <Show when={isCloud && !configured()}>\n            <span class=\"model-selector-api-required\" title=\"Click to configure API key\">\n              API Key Required\n            </span>\n          </Show>\n          <Show when={isCloud && configured()}>\n            <span class=\"model-selector-cost\" title={`Estimated cost: ${model.costEstimate}`}>\n              {model.costEstimate}\n            </span>\n          </Show>\n          <Show when={!isCloud}>\n            <span class=\"model-selector-size\">{model.size}</span>\n          </Show>\n          <Show when={status().isDownloaded && !status().isDownloading && !isCloud}>\n            <span class=\"model-selector-status model-status-ready\" title=\"Model ready\">\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M20 6L9 17l-5-5\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n              </svg>\n            </span>\n          </Show>\n          <Show when={isCloud && configured()}>\n            <span class=\"model-selector-status model-status-ready\" title=\"API configured\">\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M20 6L9 17l-5-5\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n              </svg>\n            </span>\n          </Show>\n          <Show when={status().error}>\n            <span class=\"model-selector-status model-status-error\" title={status().error || 'Error'}>\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\" />\n                <path d=\"M12 8v4m0 4h.01\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" />\n              </svg>\n            </span>\n          </Show>\n        </div>\n\n        <Show when={status().isDownloading}>\n          <div class=\"model-selector-progress\">\n            <div class=\"model-selector-progress-bar\">\n              <div\n                class=\"model-selector-progress-fill\"\n                style={{ width: `${status().progress}%` }}\n              />\n            </div>\n            <span class=\"model-selector-progress-text\">\n              {Math.round(status().progress)}%\n            </span>\n          </div>\n        </Show>\n      </button>\n    );\n  };\n\n  return (\n    <section class=\"model-selector-section\">\n      {/* Local Models */}\n      <div class=\"model-selector-label\">Local Models</div>\n      <div class=\"model-selector-buttons\">\n        <For each={LOCAL_MODELS}>\n          {(model) => renderModelButton(model)}\n        </For>\n      </div>\n\n      {/* Cloud Providers */}\n      <div class=\"model-selector-label cloud-label\">\n        Cloud Providers\n        <button class=\"configure-link\" onClick={openOptions} title=\"Configure API keys\">\n          Configure\n        </button>\n      </div>\n      <div class=\"model-selector-buttons cloud-buttons\">\n        <For each={CLOUD_PROVIDERS}>\n          {(model) => renderModelButton(model)}\n        </For>\n      </div>\n    </section>\n  );\n};\n\nexport default ModelSelector;\n","import { Component, For } from 'solid-js';\n\ninterface Props {\n  sourceLang: string;\n  targetLang: string;\n  onSourceChange: (lang: string) => void;\n  onTargetChange: (lang: string) => void;\n  onSwap: () => void;\n}\n\nconst LANGUAGES = [\n  { code: 'auto', name: 'Auto Detect', flag: '' },\n  { code: 'en', name: 'English', flag: '' },\n  { code: 'fi', name: 'Finnish', flag: '' },\n  { code: 'de', name: 'German', flag: '' },\n  { code: 'fr', name: 'French', flag: '' },\n  { code: 'es', name: 'Spanish', flag: '' },\n  { code: 'sv', name: 'Swedish', flag: '' },\n  { code: 'ru', name: 'Russian', flag: '' },\n  { code: 'zh', name: 'Chinese', flag: '' },\n  { code: 'ja', name: 'Japanese', flag: '' },\n  { code: 'nl', name: 'Dutch', flag: '' },\n  { code: 'cs', name: 'Czech', flag: '' },\n];\n\nexport const LanguageSelector: Component<Props> = (props) => {\n  return (\n    <section class=\"language-section\">\n      <div class=\"language-inputs\">\n        <div class=\"language-group\">\n          <div class=\"select-wrapper\">\n            <select\n              class=\"language-select\"\n              value={props.sourceLang}\n              onChange={(e) => props.onSourceChange(e.target.value)}\n              aria-label=\"Source language\"\n            >\n              <For each={LANGUAGES}>\n                {(lang) => (\n                  <option value={lang.code}>\n                    {lang.flag} {lang.name}\n                  </option>\n                )}\n              </For>\n            </select>\n            <svg class=\"select-arrow\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path\n                d=\"M6 9l6 6 6-6\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          </div>\n        </div>\n\n        <button class=\"swap-button\" onClick={props.onSwap} aria-label=\"Swap languages\">\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path\n              d=\"M17 17H7l4 4m-4-14h10l-4-4\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        </button>\n\n        <div class=\"language-group\">\n          <div class=\"select-wrapper\">\n            <select\n              class=\"language-select\"\n              value={props.targetLang}\n              onChange={(e) => props.onTargetChange(e.target.value)}\n              aria-label=\"Target language\"\n            >\n              <For each={LANGUAGES.filter((l) => l.code !== 'auto')}>\n                {(lang) => (\n                  <option value={lang.code}>\n                    {lang.flag} {lang.name}\n                  </option>\n                )}\n              </For>\n            </select>\n            <svg class=\"select-arrow\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path\n                d=\"M6 9l6 6 6-6\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n","import { Component, For } from 'solid-js';\nimport type { Strategy } from '../../types';\n\ninterface Props {\n  selected: Strategy;\n  onChange: (strategy: Strategy) => void;\n}\n\nconst STRATEGIES: Array<{ id: Strategy; label: string; title: string }> = [\n  { id: 'smart', label: 'Smart', title: 'Intelligent provider selection' },\n  { id: 'fast', label: 'Fast', title: 'Optimize for speed' },\n  { id: 'quality', label: 'Quality', title: 'Optimize for quality' },\n];\n\nexport const StrategySelector: Component<Props> = (props) => {\n  return (\n    <section class=\"strategy-section\">\n      <div class=\"strategy-buttons\">\n        <For each={STRATEGIES}>\n          {(strategy) => (\n            <button\n              class={`strategy-button ${props.selected === strategy.id ? 'active' : ''}`}\n              data-strategy={strategy.id}\n              title={strategy.title}\n              onClick={() => props.onChange(strategy.id)}\n            >\n              {strategy.label}\n            </button>\n          )}\n        </For>\n      </div>\n    </section>\n  );\n};\n","import { Component } from 'solid-js';\nimport type { UsageStats } from '../../types';\n\ninterface Props {\n  usage: UsageStats;\n}\n\nexport const UsageBar: Component<Props> = (props) => {\n  const requestLimit = 100;\n  const charLimit = 50000;\n\n  const requestPercent = () => Math.min((props.usage.today.requests / requestLimit) * 100, 100);\n  const charPercent = () => Math.min((props.usage.today.characters / charLimit) * 100, 100);\n\n  const formatChars = (chars: number) => {\n    if (chars >= 1000) {\n      return `${(chars / 1000).toFixed(1)}k`;\n    }\n    return chars.toString();\n  };\n\n  return (\n    <section class=\"usage-section\">\n      <div class=\"usage-header\">\n        <span class=\"usage-title\">Today:</span>\n        <span class=\"usage-summary\">\n          {props.usage.today.requests}/{requestLimit} req, {formatChars(props.usage.today.characters)}/\n          {formatChars(charLimit)} chars\n        </span>\n      </div>\n      <div class=\"usage-bars\">\n        <div class=\"usage-bar\">\n          <div class=\"usage-bar-track\">\n            <div\n              class=\"usage-bar-fill\"\n              style={{ width: `${requestPercent()}%` }}\n              data-type=\"requests\"\n            />\n          </div>\n        </div>\n        <div class=\"usage-bar\">\n          <div class=\"usage-bar-track\">\n            <div class=\"usage-bar-fill\" style={{ width: `${charPercent()}%` }} data-type=\"chars\" />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n","import { Component } from 'solid-js';\nimport type { UsageStats } from '../../types';\n\ninterface Props {\n  usage: UsageStats;\n}\n\nexport const CostMonitor: Component<Props> = (props) => {\n  const formatCost = (cost: number) => {\n    return `$${cost.toFixed(2)}`;\n  };\n\n  const budgetPercent = () => {\n    if (props.usage.budget.monthly === 0) return 0;\n    return Math.min((props.usage.budget.used / props.usage.budget.monthly) * 100, 100);\n  };\n\n  const isOverBudget = () => props.usage.budget.used > props.usage.budget.monthly;\n\n  return (\n    <section class=\"cost-section\">\n      <div class=\"cost-monitor\">\n        <span class=\"cost-label\">\n          Cost: <span class=\"cost-today\">{formatCost(props.usage.today.cost)}</span>\n        </span>\n        <span class={`budget-label ${isOverBudget() ? 'over-budget' : ''}`}>\n          (Budget: <span class=\"budget-monthly\">{formatCost(props.usage.budget.monthly)}</span>/month)\n        </span>\n      </div>\n      <div class=\"budget-bar\">\n        <div class=\"budget-bar-track\">\n          <div\n            class={`budget-bar-fill ${isOverBudget() ? 'over-budget' : ''}`}\n            style={{ width: `${budgetPercent()}%` }}\n          />\n        </div>\n      </div>\n    </section>\n  );\n};\n","import { Component, Show } from 'solid-js';\n\ninterface Props {\n  isLoading: boolean;\n  progress: number;\n  isCached: boolean;\n  modelId: string | null;\n  currentFile: string | null;\n}\n\n// Extract short model name from full ID (e.g., \"Xenova/opus-mt-en-fi\" -> \"en-fi\")\nfunction getShortModelName(modelId: string | null): string {\n  if (!modelId) return 'Model';\n  const match = modelId.match(/opus-mt-(.+)$/);\n  return match ? match[1].toUpperCase() : modelId;\n}\n\n// Format file name for display\nfunction getShortFileName(file: string | null): string {\n  if (!file) return '';\n  // Extract just the filename from paths like \"onnx/model.onnx\"\n  const parts = file.split('/');\n  return parts[parts.length - 1];\n}\n\n// Estimate download size for first-time users\nfunction getEstimatedSize(): string {\n  return '~50-100 MB'; // OPUS-MT models are typically in this range\n}\n\nexport const ModelStatus: Component<Props> = (props) => {\n  return (\n    <Show when={props.isLoading || props.isCached}>\n      <div class=\"model-status\">\n        <Show when={props.isLoading}>\n          <div class=\"model-loading\">\n            <div class=\"model-loading-header\">\n              <span class=\"model-loading-icon\">\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"spinning\">\n                  <path\n                    d=\"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83\"\n                    stroke=\"currentColor\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                  />\n                </svg>\n              </span>\n              <span class=\"model-loading-text\">\n                {props.progress < 100\n                  ? `Downloading ${getShortModelName(props.modelId)}...`\n                  : 'Initializing model...'}\n              </span>\n            </div>\n            <div class=\"model-progress-container\">\n              <div class=\"model-progress-bar\">\n                <div\n                  class=\"model-progress-fill\"\n                  style={{ width: `${props.progress}%` }}\n                />\n              </div>\n              <span class=\"model-progress-percent\">{Math.round(props.progress)}%</span>\n            </div>\n            <Show when={props.currentFile}>\n              <div class=\"model-file-info\">\n                {getShortFileName(props.currentFile)}\n              </div>\n            </Show>\n            <Show when={props.progress === 0}>\n              <div class=\"model-first-time\">\n                First-time download: {getEstimatedSize()}\n              </div>\n            </Show>\n          </div>\n        </Show>\n\n        <Show when={!props.isLoading && props.isCached}>\n          <div class=\"model-cached\">\n            <span class=\"model-cached-icon\">\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path\n                  d=\"M20 6L9 17l-5-5\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"2\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </span>\n            <span class=\"model-cached-text\">\n              {getShortModelName(props.modelId)} ready\n            </span>\n          </div>\n        </Show>\n      </div>\n    </Show>\n  );\n};\n","import { createSignal, onMount, onCleanup, Show } from 'solid-js';\nimport { ProviderStatus } from './components/ProviderStatus';\nimport { ModelSelector, type ModelDownloadStatus } from './components/ModelSelector';\nimport { LanguageSelector } from './components/LanguageSelector';\nimport { StrategySelector } from './components/StrategySelector';\nimport { UsageBar } from './components/UsageBar';\nimport { CostMonitor } from './components/CostMonitor';\nimport { ModelStatus } from './components/ModelStatus';\nimport type { Strategy, UsageStats, ModelProgressMessage, TranslationProviderId } from '../types';\nimport { safeStorageGet, safeStorageSet } from '../core/storage';\nimport { browserAPI, isFirefox } from '../core/browser-api';\n\n// Detect browser's preferred language, fallback to 'en'\nconst getBrowserLanguage = () => {\n  const lang = navigator.language?.split('-')[0] || 'en';\n  return lang;\n};\n\nexport default function App() {\n  const [sourceLang, setSourceLangInternal] = createSignal('auto');\n  const [targetLang, setTargetLangInternal] = createSignal(getBrowserLanguage());\n  const [strategy, setStrategyInternal] = createSignal<Strategy>('smart');\n  const [activeProvider, setActiveProvider] = createSignal<TranslationProviderId>('opus-mt');\n  const [providerStatus, setProviderStatus] = createSignal<'ready' | 'loading' | 'error'>('ready');\n\n  const providerName = () => {\n    switch (activeProvider()) {\n      case 'translategemma': return 'TranslateGemma 4B';\n      case 'chrome-builtin': return 'Chrome Built-in';\n      default: return 'Helsinki-NLP OPUS-MT';\n    }\n  };\n  const [isTranslating, setIsTranslating] = createSignal(false);\n  const [autoTranslate, setAutoTranslate] = createSignal(false);\n  const [error, setError] = createSignal<string | null>(null);\n  const [usage, _setUsage] = createSignal<UsageStats>({\n    today: { requests: 0, characters: 0, cost: 0 },\n    budget: { monthly: 2.0, used: 0 },\n  });\n\n  // Model caching state\n  const [isModelLoading, setIsModelLoading] = createSignal(false);\n  const [modelProgress, setModelProgress] = createSignal(0);\n  const [isModelCached, setIsModelCached] = createSignal(false);\n  const [currentModelId, setCurrentModelId] = createSignal<string | null>(null);\n  const [downloadingFile, setDownloadingFile] = createSignal<string | null>(null);\n\n  // Per-model download status for ModelSelector\n  // Cloud providers and chrome-builtin don't need downloads - always \"ready\"\n  const [modelDownloadStatus, setModelDownloadStatus] = createSignal<\n    Record<TranslationProviderId, ModelDownloadStatus>\n  >({\n    'opus-mt': { isDownloading: false, progress: 0, isDownloaded: false, error: null },\n    'translategemma': { isDownloading: false, progress: 0, isDownloaded: false, error: null },\n    'chrome-builtin': { isDownloading: false, progress: 100, isDownloaded: true, error: null },\n    'deepl': { isDownloading: false, progress: 100, isDownloaded: true, error: null },\n    'openai': { isDownloading: false, progress: 100, isDownloaded: true, error: null },\n    'google-cloud': { isDownloading: false, progress: 100, isDownloaded: true, error: null },\n    'anthropic': { isDownloading: false, progress: 100, isDownloaded: true, error: null },\n  });\n\n  // Wrapper functions that persist language preferences to storage\n  const setSourceLang = (lang: string) => {\n    setSourceLangInternal(lang);\n    safeStorageSet({ sourceLang: lang });\n  };\n\n  const setTargetLang = (lang: string) => {\n    setTargetLangInternal(lang);\n    safeStorageSet({ targetLang: lang });\n    console.log('[Popup] Target language saved:', lang);\n  };\n\n  const setStrategy = (s: Strategy) => {\n    setStrategyInternal(s);\n    safeStorageSet({ strategy: s });\n  };\n\n  // Determine provider from model ID (e.g., \"Xenova/opus-mt-en-fi\" -> \"opus-mt\")\n  const getProviderFromModelId = (modelId: string): TranslationProviderId | null => {\n    if (modelId.includes('opus-mt')) return 'opus-mt';\n    if (modelId.includes('gemma') || modelId.includes('translategemma')) return 'translategemma';\n    return null;\n  };\n\n  // Update per-model download status\n  const updateModelStatus = (\n    providerId: TranslationProviderId,\n    updates: Partial<ModelDownloadStatus>\n  ) => {\n    setModelDownloadStatus((prev) => ({\n      ...prev,\n      [providerId]: { ...prev[providerId], ...updates },\n    }));\n  };\n\n  // Handle model progress messages from offscreen document\n  const handleModelProgress = (message: ModelProgressMessage) => {\n    if (message.type !== 'modelProgress') return;\n\n    console.log('[Popup] Model progress:', message.status, message.progress);\n    setCurrentModelId(message.modelId);\n\n    // Determine which provider this model belongs to\n    const providerId = getProviderFromModelId(message.modelId);\n\n    switch (message.status) {\n      case 'initiate':\n        setIsModelLoading(true);\n        setIsModelCached(false);\n        setModelProgress(0);\n        setProviderStatus('loading');\n        setDownloadingFile(message.file || null);\n        if (providerId) {\n          updateModelStatus(providerId, {\n            isDownloading: true,\n            progress: 0,\n            isDownloaded: false,\n            error: null,\n          });\n        }\n        break;\n      case 'download':\n      case 'progress':\n        setIsModelLoading(true);\n        setModelProgress(message.progress ?? 0);\n        setDownloadingFile(message.file || null);\n        if (providerId) {\n          updateModelStatus(providerId, {\n            isDownloading: true,\n            progress: message.progress ?? 0,\n          });\n        }\n        break;\n      case 'done':\n        setModelProgress(100);\n        setDownloadingFile(null);\n        if (providerId) {\n          updateModelStatus(providerId, {\n            progress: 100,\n          });\n        }\n        break;\n      case 'ready':\n        setIsModelLoading(false);\n        setIsModelCached(true);\n        setModelProgress(100);\n        setProviderStatus('ready');\n        setDownloadingFile(null);\n        if (providerId) {\n          updateModelStatus(providerId, {\n            isDownloading: false,\n            progress: 100,\n            isDownloaded: true,\n            error: null,\n          });\n        }\n        break;\n      case 'error':\n        setIsModelLoading(false);\n        setProviderStatus('error');\n        setDownloadingFile(null);\n        if (message.error) {\n          setError(`Model error: ${message.error}`);\n        }\n        if (providerId) {\n          updateModelStatus(providerId, {\n            isDownloading: false,\n            error: message.error || 'Unknown error',\n          });\n        }\n        break;\n    }\n  };\n\n  onMount(async () => {\n    // Listen for model progress messages\n    const messageListener = (message: ModelProgressMessage) => {\n      handleModelProgress(message);\n    };\n    browserAPI.runtime.onMessage.addListener(messageListener);\n\n    // Store cleanup function\n    onCleanup(() => {\n      browserAPI.runtime.onMessage.removeListener(messageListener);\n    });\n\n    // Load saved preferences (use internal setters to avoid re-saving)\n    interface StoredPrefs {\n      sourceLang?: string;\n      targetLang?: string;\n      strategy?: Strategy;\n      autoTranslate?: boolean;\n      provider?: TranslationProviderId;\n    }\n    const stored = await safeStorageGet<StoredPrefs>(['sourceLang', 'targetLang', 'strategy', 'autoTranslate', 'provider']);\n    if (stored.sourceLang) setSourceLangInternal(stored.sourceLang);\n    if (stored.targetLang) setTargetLangInternal(stored.targetLang);\n    if (stored.strategy) setStrategyInternal(stored.strategy);\n    if (stored.autoTranslate !== undefined) setAutoTranslate(stored.autoTranslate);\n    if (stored.provider) setActiveProvider(stored.provider);\n    console.log('[Popup] Loaded preferences:', { source: stored.sourceLang, target: stored.targetLang });\n\n    // Check Chrome Translator API availability (Chrome 138+)\n    try {\n      const response = await browserAPI.runtime.sendMessage({ type: 'checkChromeTranslator' });\n      if (response?.available) {\n        console.log('[Popup] Chrome Translator API available');\n        updateModelStatus('chrome-builtin', { isDownloaded: true, error: null });\n      } else {\n        console.log('[Popup] Chrome Translator API not available (Chrome 138+ required)');\n        updateModelStatus('chrome-builtin', { isDownloaded: false, error: 'Chrome 138+ required' });\n      }\n    } catch (e) {\n      console.log('[Popup] Chrome Translator check failed:', e);\n      updateModelStatus('chrome-builtin', { isDownloaded: false, error: 'Not available' });\n    }\n  });\n\n  const toggleAutoTranslate = async () => {\n    const newValue = !autoTranslate();\n    setAutoTranslate(newValue);\n    const saved = await safeStorageSet({\n      autoTranslate: newValue,\n      sourceLang: sourceLang(),\n      targetLang: targetLang(),\n      strategy: strategy(),\n    });\n    if (saved) {\n      console.log('[Popup] Auto-translate:', newValue);\n    }\n  };\n\n  const handleProviderChange = async (provider: TranslationProviderId) => {\n    setActiveProvider(provider);\n    setProviderStatus('ready');\n    setError(null);\n\n    await safeStorageSet({ provider });\n    try {\n      // Notify background service worker\n      await browserAPI.runtime.sendMessage({ type: 'setProvider', provider });\n      console.log('[Popup] Provider changed to:', provider);\n    } catch (e) {\n      console.error('[Popup] Failed to set provider:', e);\n    }\n  };\n\n  // Inject content script if not already loaded\n  const ensureContentScript = async (tabId: number): Promise<boolean> => {\n    try {\n      // Try to ping the content script\n      await browserAPI.tabs.sendMessage(tabId, { type: 'ping' });\n      return true;\n    } catch {\n      // Content script not loaded, inject it\n      console.log('[Popup] Injecting content script...');\n      try {\n        await browserAPI.scripting.executeScript({\n          target: { tabId },\n          files: ['content.js'],\n        });\n        // Wait a bit for script to initialize\n        await new Promise((resolve) => setTimeout(resolve, 100));\n        return true;\n      } catch (injectError) {\n        console.error('[Popup] Failed to inject content script:', injectError);\n        return false;\n      }\n    }\n  };\n\n  const handleError = (e: unknown) => {\n    const msg = e instanceof Error ? e.message : String(e);\n    if (msg.includes('Cannot access')) {\n      setError('Cannot translate this page');\n    } else {\n      setError(msg);\n    }\n    // Clear error after 5 seconds\n    setTimeout(() => setError(null), 5000);\n  };\n\n  const handleTranslateSelection = async () => {\n    setIsTranslating(true);\n    setError(null);\n    try {\n      const [tab] = await browserAPI.tabs.query({ active: true, currentWindow: true });\n      if (!tab?.id) {\n        setError('No active tab');\n        return;\n      }\n      // Check if it's a restricted URL (handles both Chrome and Firefox)\n      const restrictedPrefixes = [\n        'chrome://', 'about:', 'chrome-extension://',\n        'moz-extension://', 'resource://', 'view-source:'\n      ];\n      if (tab.url && restrictedPrefixes.some(prefix => tab.url!.startsWith(prefix))) {\n        setError('Cannot translate browser pages');\n        return;\n      }\n      // Ensure content script is loaded\n      const injected = await ensureContentScript(tab.id);\n      if (!injected) {\n        setError('Cannot access this page');\n        return;\n      }\n      await browserAPI.tabs.sendMessage(tab.id, {\n        type: 'translateSelection',\n        sourceLang: sourceLang(),\n        targetLang: targetLang(),\n        strategy: strategy(),\n        provider: activeProvider(),\n      });\n    } catch (e) {\n      console.error('[Popup] Translation failed:', e);\n      handleError(e);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n\n  const handleTranslatePage = async () => {\n    setIsTranslating(true);\n    setError(null);\n    try {\n      const [tab] = await browserAPI.tabs.query({ active: true, currentWindow: true });\n      if (!tab?.id) {\n        setError('No active tab');\n        return;\n      }\n      // Check if it's a restricted URL (handles both Chrome and Firefox)\n      const restrictedPrefixes = [\n        'chrome://', 'about:', 'chrome-extension://',\n        'moz-extension://', 'resource://', 'view-source:'\n      ];\n      if (tab.url && restrictedPrefixes.some(prefix => tab.url!.startsWith(prefix))) {\n        setError('Cannot translate browser pages');\n        return;\n      }\n      // Ensure content script is loaded\n      const injected = await ensureContentScript(tab.id);\n      if (!injected) {\n        setError('Cannot access this page');\n        return;\n      }\n      await browserAPI.tabs.sendMessage(tab.id, {\n        type: 'translatePage',\n        sourceLang: sourceLang(),\n        targetLang: targetLang(),\n        strategy: strategy(),\n        provider: activeProvider(),\n      });\n    } catch (e) {\n      console.error('[Popup] Page translation failed:', e);\n      handleError(e);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n\n  const swapLanguages = () => {\n    if (sourceLang() !== 'auto') {\n      const temp = sourceLang();\n      setSourceLang(targetLang());\n      setTargetLang(temp);\n    }\n  };\n\n  const openSettings = () => {\n    browserAPI.runtime.openOptionsPage();\n  };\n\n  return (\n    <div class=\"popup-container\">\n      {/* Header */}\n      <header class=\"popup-header\">\n        <div class=\"header-brand\">\n          <div class=\"brand-icon\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path\n                d=\"M3 5h12M9 3v2m1.048 3.5A3.5 3.5 0 016.5 12a3.5 3.5 0 01-2.45-5.943M6 16l-2 6 3-2 3 2-2-6M21 21l-6-6m6 0l-6 6M15 15l6-6m-6 0l6 6\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          </div>\n          <div class=\"brand-text\">\n            <h1 class=\"brand-title\">TRANSLATE!</h1>\n            <span class=\"brand-author\">by Mikko</span>\n          </div>\n          <button class=\"settings-button\" onClick={openSettings} aria-label=\"Settings\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" stroke-width=\"2\" />\n              <path\n                d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n              />\n            </svg>\n          </button>\n        </div>\n        <ProviderStatus name={providerName()} status={providerStatus()} />\n        <ModelStatus\n          isLoading={isModelLoading()}\n          progress={modelProgress()}\n          isCached={isModelCached()}\n          modelId={currentModelId()}\n          currentFile={downloadingFile()}\n        />\n      </header>\n\n      <main class=\"popup-main\">\n        {/* Model Selection with Download Status */}\n        <ModelSelector\n          selected={activeProvider()}\n          onChange={handleProviderChange}\n          downloadStatus={modelDownloadStatus()}\n        />\n\n        {/* Language Selection */}\n        <LanguageSelector\n          sourceLang={sourceLang()}\n          targetLang={targetLang()}\n          onSourceChange={setSourceLang}\n          onTargetChange={setTargetLang}\n          onSwap={swapLanguages}\n        />\n\n        {/* Strategy Selection */}\n        <StrategySelector selected={strategy()} onChange={setStrategy} />\n\n        {/* Auto-Translate Toggle */}\n        <section class=\"auto-section\">\n          <label class=\"auto-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={autoTranslate()}\n              onChange={toggleAutoTranslate}\n            />\n            <span class=\"toggle-slider\"></span>\n            <span class=\"toggle-label\">Auto-translate pages</span>\n          </label>\n        </section>\n\n        {/* Error Display */}\n        <Show when={error()}>\n          <div class=\"error-banner\">{error()}</div>\n        </Show>\n\n        {/* Action Buttons */}\n        <section class=\"action-section\">\n          <button\n            class=\"action-button action-button--primary\"\n            onClick={handleTranslatePage}\n            disabled={isTranslating()}\n          >\n            <Show when={!isTranslating()} fallback={<span class=\"spinner\" />}>\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M4 6h16M4 10h16M4 14h16M4 18h16\" stroke=\"currentColor\" stroke-width=\"2\" />\n              </svg>\n            </Show>\n            <span>Translate Page</span>\n          </button>\n\n          <button\n            class=\"action-button action-button--secondary\"\n            onClick={handleTranslateSelection}\n            disabled={isTranslating()}\n          >\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path\n                d=\"M12 2l3.09 6.26L22 9l-5 4.87L18.18 22 12 18.77 5.82 22 7 13.87 2 9l6.91-.74L12 2z\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                fill=\"none\"\n              />\n            </svg>\n            <span>Translate Selection</span>\n          </button>\n        </section>\n\n        {/* Usage Tracking */}\n        <UsageBar usage={usage()} />\n\n        {/* Cost Monitor */}\n        <CostMonitor usage={usage()} />\n      </main>\n    </div>\n  );\n}\n","/* @refresh reload */\nimport { render } from 'solid-js/web';\nimport App from './App';\n\nconst root = document.getElementById('root');\n\nif (root) {\n  render(() => <App />, root);\n}\n"],"names":["ProviderStatus","props","statusIndicator","status","icon","text","class","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_$insert","name","_$effect","_$className","LOCAL_MODELS","id","tag","description","size","CLOUD_PROVIDERS","isCloud","costEstimate","CloudIcon","ModelSelector","cloudApiStatus","setCloudApiStatus","createSignal","onMount","response","chrome","runtime","sendMessage","type","getStatus","modelId","downloadStatus","isDownloading","progress","isDownloaded","error","getStatusClass","isCloudConfigured","openOptions","openOptionsPage","renderModelButton","model","isActive","selected","configured","_tmpl$9","$$click","onChange","_$createComponent","Show","when","children","_tmpl$2","_el$8","_tmpl$3","_$setAttribute","_el$9","_tmpl$4","_tmpl$5","_tmpl$6","_el$10","_tmpl$7","_el$11","_tmpl$8","_el$12","_el$13","_el$14","_el$15","Math","round","_$p","_$setStyleProperty","_p$","_v$","_v$2","_v$3","_v$4","e","t","disabled","a","o","undefined","_el$16","_tmpl$0","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","For","each","_$delegateEvents","LANGUAGES","code","flag","LanguageSelector","_el$7","addEventListener","onSourceChange","target","value","_el$0","_el$1","lang","_$addEventListener","onSwap","onTargetChange","filter","l","sourceLang","targetLang","STRATEGIES","label","title","StrategySelector","strategy","UsageBar","requestPercent","min","usage","today","requests","requestLimit","charPercent","characters","charLimit","formatChars","chars","toFixed","toString","CostMonitor","formatCost","cost","budgetPercent","budget","monthly","used","isOverBudget","getShortModelName","match","toUpperCase","getShortFileName","file","parts","split","length","getEstimatedSize","ModelStatus","isLoading","isCached","_c$","_$memo","currentFile","getBrowserLanguage","navigator","language","App","setSourceLangInternal","setTargetLangInternal","setStrategyInternal","activeProvider","setActiveProvider","providerStatus","setProviderStatus","providerName","isTranslating","setIsTranslating","autoTranslate","setAutoTranslate","setError","isModelLoading","setIsModelLoading","modelProgress","setModelProgress","isModelCached","setIsModelCached","currentModelId","setCurrentModelId","downloadingFile","setDownloadingFile","modelDownloadStatus","setModelDownloadStatus","setSourceLang","safeStorageSet","setTargetLang","console","log","setStrategy","s","getProviderFromModelId","includes","updateModelStatus","providerId","updates","prev","handleModelProgress","message","messageListener","browserAPI","onMessage","addListener","onCleanup","removeListener","stored","safeStorageGet","provider","source","available","toggleAutoTranslate","newValue","handleProviderChange","ensureContentScript","tabId","tabs","scripting","executeScript","files","Promise","resolve","setTimeout","injectError","handleError","msg","Error","String","handleTranslateSelection","tab","query","active","currentWindow","restrictedPrefixes","url","some","prefix","startsWith","handleTranslatePage","swapLanguages","temp","openSettings","fallback","checked","root","document","getElementById","render"],"mappings":"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"}